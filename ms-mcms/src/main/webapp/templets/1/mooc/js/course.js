(function(){define("lib/m",[],function(){"use strict";var e=!!document.all&&navigator.userAgent.indexOf("Opera")===-1,t=e&&!("maxHeight"in document.body.style),n=e&&"prototype"in Image,r=e&&!t&&!n,i=window,s=i.document;return{ua:{isIE:e,isIE6:t,isIE8:n,isIE7:r,isFF:!!s.getBoxObjectFor||"mozInnerScreenX"in i,isOP:!!i.opera&&!!i.opera.toString().indexOf("Opera"),isOP9:/^function \(/.test([].sort),isWK:!!i.devicePixelRatio,isSF:/a/.__proto__=="//",isCR:/s/.test(/a/.toString)},scriptOnload:function(e,t){this.ua.isIE?e.attachEvent("onreadystatechange",function(){var n=e.readyState;(n==="loaded"||n==="complete")&&t()}):(e.addEventListener("load",t,!1),e.addEventListener("error",function(){t()},!1))},loadScript:function(e,t){var n=s.createElement("script"),r=this.loadScript.head=this.loadScript.head||s.getElementsByTagName("head")[0];return this.scriptOnload(n,function(){t&&t.call(n);try{if(n.clearAttributes)n.clearAttributes();else for(var e in n)delete n[e]}catch(i){}r.removeChild(n)}),n.async=!0,n.src=e,r.insertBefore(n,r.firstChild)},isHtml:function(e){var t=/^[^<]*(<[\w\W]+>)[^>]*$/;return t.test(e)},format:function(e,t,n){if(typeof t=="string"){var r=n?t:"{v}",i=n||t;return e.replace(r,""+i)}var s=t,i;return e.replace(/\{([^{}]+)\}/g,function(e,t){return i=s[t],i!==undefined?""+i:""})}}}),define("lib/JSON2",function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}window.JSON||(window.JSON={}),typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),define("lib/JSON2",function(){}),define("lib/store",["lib/JSON2"],function(){function e(){var e="test",t=window.localStorage;try{return t.setItem(e,"1"),t.removeItem(e),"localStorage"in window}catch(n){return!1}}var t=e(),n={set:function(){},get:function(){},remove:function(){},clear:function(){},isSupport:!1};if(t){var r=window.localStorage,i=function(e,t){var n=r[e];return function(i){setTimeout(function(){i=i||window.storageEvent;var s=i.key,o=i.newValue;if(!s){var u=r[e];u!=n&&(s=e,o=u)}s==e&&(t&&t(o==null?null:JSON.parse(o)),n=o)},0)}};n.set=function(e,t){r.setItem(e,JSON.stringify(t))},n.get=function(e){var t=r.getItem(e),i=t==null?null:JSON.parse(t);return i!==null&&i.date&&i.expiredDate&&n._expired(e,i.expiredDate,i.date)&&(i=null),i},n.remove=function(e){r.removeItem(e)},n.clear=function(){r.clear()},n.onStorage=function(e,t){window.addEventListener?window.addEventListener("storage",i(e,t),!1):document.attachEvent("storage",i(e,t))},n._expired=function(e,t,r){return(new Date).getTime()-r>=t*864e5?(n.remove(e),!0):!1},n.isSupport=!0}else/MSIE ([^;]+)/.test(navigator.userAgent)&&(n={o:null,defExps:365,init:function(){if(!n.o)try{n.o=document.createElement("input"),n.o.type="hidden",n.o.addBehavior("#default#userData"),document.body.appendChild(n.o)}catch(e){return!1}return!0},set:function(e,t,r){if(n.init()){var i=n.o;i.load(e),t&&i.setAttribute("code",JSON.stringify(t));var s=new Date,r=r?r:n.defExps;s.setDate(s.getDate()+r),i.expires=s.toUTCString(),i.save(e)}},get:function(e){if(n.init()){var t=n.o;return t.load(e),typeof t.getAttribute("code")=="undefined"?null:JSON.parse(t.getAttribute("code"))}},onStorage:function(){},remove:function(e){n.set(e,!1,-365)},isSupport:!0});return n}),define("lib/user",["lib/store"],function(e){function n(n,i){if(!window.ukey)return n(null);var s=r();!s||window.ukey!=s.ukey?$.getJSON("/_csi/user/info.json").done(function(r){r.ok&&(e.isSupport&&e.set(t,r.result),n(r.result))}).fail(function(){i&i()}):n(s)}function r(){e.get(t)}function i(){e.remove(t)}var t="CURRENT_USER_CACHE_KEY";return{getCurrent:n,getUserCache:r,clearUserCache:i,isLogin:function(){return typeof ukey=="undefined"&&(ukey=!1),ukey?!0:!1},toLogin:function(e){document.location.href=e}}}),define("lib/bdShare",[],function(){var e='分享到：                            <a data-cmd="douban" class="share-db" href="#" title="分享到豆瓣">豆瓣</a>                            <a data-cmd="tsina" class="share-sina" href="#" title="分享到新浪微博">新浪微博</a>                            <a data-cmd="qzone" class="share-qzone" href="#" title="分享到QQ空间">QQ空间</a>                            <a data-cmd="weixin" class="share-wx" href="#" title="分享到微信">微信</a>                            <a data-cmd="tqq" class="share-qqmb" href="#" title="分享到腾讯微博">腾讯微博</a>                            <div class="counter"><b><s></s></b><span class="bds_count share_counter" data-cmd="count"></span></div>',t;return function(n,r){t=$(n);var i=r||e;t.html(i)}}),define("lib/support",["lib/m"],function(e){"use strict";var t=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),n="Webkit Moz O ms Khtml".split(" "),r=document.createElement("div");return{fixed:function i(){if(typeof i.r!="undefined")return i.r;var t=!0;if(e.ua.isIpad||e.ua.isIphone)t=navigator.userAgent.match(/[5-9]_[0-9]/)!==null;else{var n=document.createElement("div"),r=document.createElement("div");n.style.position="absolute",n.style.top="200px",r.style.position="fixed",r.style.top="100px",n.appendChild(r),document.body.appendChild(n),r.getBoundingClientRect&&r.getBoundingClientRect().top==n.getBoundingClientRect().top&&(t=!1),document.body.removeChild(n),n=null,r=null}return i.r=t,t},touchEvent:function s(){if(typeof s.r!="undefined")return s.r;var e=!0,t=["touchstart","touchmove","touchend","touchcancel"];for(var n=0,i=t.length;n<i;n++){var o=t[n];o="on"+o;var u=o in r;u||(r.setAttribute(o,"return;"),u=typeof r[o]=="function");if(!u){e=!1;break}}return s.r=e,e},cssanimation:function o(){if(typeof o.r!="undefined")return o.r;var e=!1,t=r.style,i="animationName",s=i.charAt(0).toUpperCase()+i.substr(1),u=(i+" "+n.join(s+" ")+s).split(" ");for(var a in u)if(t[u[a]]!==undefined){e=!0;break}return o.r=e,e}}}),define("lib/Anime",["lib/support"],function(e){"use strict";return{addCssString:function(e){var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t),t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML+=e},loading:function(e){e.jquery||(e=$(e))},flipping:function(t,n,r,i){function u(){i&&i(t)}n=n||500,r=r||0;var s=".flip-container {                        -webkit-perspective: 1000;                        -moz-perspective: 1000;                        -o-perspective: 1000;                        perspective: 1000;                    }                    .gui-anime-flipping {                        -webkit-transform: rotateY(180deg);                        -moz-transform: rotateY(180deg);                        -o-transform: rotateY(180deg);                        transform: rotateY(180deg);                    }                    .flipper {                        -webkit-transition: <t>s;                        -webkit-transform-style: preserve-3d;                        -moz-transition: <t>s;                        -moz-transform-style: preserve-3d;                        -o-transition: <t>s;                        -o-transform-style: preserve-3d;                        transition: <t>s;                        transform-style: preserve-3d;                        position: relative;                    }                    .front, .back {                        -webkit-backface-visibility: hidden;                        -moz-backface-visibility: hidden;                        -o-backface-visibility: hidden;                        backface-visibility: hidden;                        position: absolute;                        top: 0;                        left: 0;                    }                    .front {                        z-index: 2;                    }                    .back {                        -webkit-transform: rotateY(180deg);                        -moz-transform: rotateY(180deg);                        -o-transform: rotateY(180deg);                        transform: rotateY(180deg);                }";if(!e.cssanimation()){t.children(":visible").fadeOut(n/2,function(){$(this).siblings().fadeIn(n/2)}),i&&i(t);return}if(!this.flippingCssAdded){try{this.addCssString(G.format(s,{t:n/1e3,d:r/1e3},/<([^<>]+)>/g))}catch(o){i&&i(t);return}this.flippingCssAdded=!0}t.find(".hide").removeClass("hide"),t.hasClass("gui-anime-flipping")?(t.removeClass("gui-anime-flipping"),setTimeout(function(){t.find(".back").addClass("hide")},n/2)):(t.addClass("gui-anime-flipping"),setTimeout(function(){t.find(".front").addClass("hide")},n/2)),setTimeout(u,n+r)},focusing:function(t,n,r,i){function o(){t.removeClass("gui-anime-focusing"),n&&n(t)}if(!e.cssanimation()){n&&n(t);return}r=r||500,i=i||0;if(!this.focusingCssAdded){try{this.addCssString(G.format("@-webkit-keyframes guiFocusing {                            0%{-webkit-transform: scale(4); opacity:0;}                            100%{-webkit-transform: scale(1); opacity:1;}                        }                        @-moz-keyframes guiFocusing {                            0%{-moz-transform: scale(4); opacity:0;}                            100%{-moz-transform: scale(1); opacity:1;}                        }                        @-o-keyframes guiFocusing {                            0%{-o-transform: scale(4); opacity:0;}                            100%{-o-transform: scale(1); opacity:1;}                        }                        @-ms-keyframes guiFocusing {                            0%{-ms-transform: scale(4); opacity:0;}                            100%{-ms-transform: scale(1); opacity:1;}                        }                        @keyframes guiFocusing {                            0%{transform: scale(4); opacity:0;}                            100%{transform: scale(1); opacity:1;}                        }                        .gui-anime-focusing {                            -webkit-animation-name: guiFocusing;                            -webkit-animation-duration: <t>s;                            -webkit-animation-delay: <d>s;                            -webkit-animation-timing-function: ease-out;                            -moz-animation-name: guiFocusing;                            -moz-animation-duration: <t>s;                            -moz-animation-delay: <d>s;                            -moz-animation-timing-function: ease-out;                            animation-name: guiFocusing;                            animation-duration: <t>s;                            animation-delay: <d>s;                            animation-timing-function: ease-out;                        }",{t:r/1e3,d:i/1e3},/<([^<>]+)>/g))}catch(s){n&&n(t);return}this.focusingCssAdded=!0}t.addClass("gui-anime-focusing"),setTimeout(o,r+i)},shaking:function(t,n,r,i){function o(){t.removeClass("gui-anime-shaking"),t.removeClass("gui-anime-shaking-inline"),n&&n(t)}if(!e.cssanimation()){n&&n(t);return}r=r||500,i=i||0;if(!this.shakingCssAdded){try{this.addCssString(G.format("@-webkit-keyframes guiShaking {                            0% { -webkit-transform: translate(2px, 1px) rotate(0deg);transform: translate(2px, 1px) rotate(0deg); }                            10% { -webkit-transform: translate(-1px, -2px) rotate(-1deg);transform: translate(-1px, -2px) rotate(-1deg); }                            20% { -webkit-transform: translate(-3px, 0px) rotate(1deg);transform: translate(-3px, 0px) rotate(1deg); }                            30% { -webkit-transform: translate(0px, 2px) rotate(0deg);transform: translate(0px, 2px) rotate(0deg); }                            40% { -webkit-transform: translate(1px, -1px) rotate(1deg);transform: translate(1px, -1px) rotate(1deg); }                            50% { -webkit-transform: translate(-1px, 2px) rotate(-1deg);transform: translate(-1px, 2px) rotate(-1deg); }                            60% { -webkit-transform: translate(-3px, 1px) rotate(0deg);transform: translate(-3px, 1px) rotate(0deg); }                            70% { -webkit-transform: translate(2px, 1px) rotate(-1deg);transform: translate(2px, 1px) rotate(-1deg); }                            80% { -webkit-transform: translate(-1px, -1px) rotate(1deg);transform: translate(-1px, -1px) rotate(1deg); }                            90% { -webkit-transform: translate(2px, 2px) rotate(0deg);transform: translate(2px, 2px) rotate(0deg); }                            100% { -webkit-transform: translate(1px, -2px) rotate(-1deg);transform: translate(1px, -2px) rotate(-1deg); }                          }                          @-moz-keyframes guiShaking {                            0% { -moz-transform: translate(2px, 1px) rotate(0deg);transform: translate(2px, 1px) rotate(0deg); }                            10% { -moz-transform: translate(-1px, -2px) rotate(-1deg);transform: translate(-1px, -2px) rotate(-1deg); }                            20% { -moz-transform: translate(-3px, 0px) rotate(1deg);transform: translate(-3px, 0px) rotate(1deg); }                            30% { -moz-transform: translate(0px, 2px) rotate(0deg);transform: translate(0px, 2px) rotate(0deg); }                            40% { -moz-transform: translate(1px, -1px) rotate(1deg);transform: translate(1px, -1px) rotate(1deg); }                            50% { -moz-transform: translate(-1px, 2px) rotate(-1deg);transform: translate(-1px, 2px) rotate(-1deg); }                            60% { -moz-transform: translate(-3px, 1px) rotate(0deg);transform: translate(-3px, 1px) rotate(0deg); }                            70% { -moz-transform: translate(2px, 1px) rotate(-1deg);transform: translate(2px, 1px) rotate(-1deg); }                            80% { -moz-transform: translate(-1px, -1px) rotate(1deg);transform: translate(-1px, -1px) rotate(1deg); }                            90% { -moz-transform: translate(2px, 2px) rotate(0deg);transform: translate(2px, 2px) rotate(0deg); }                            100% { -moz-transform: translate(1px, -2px) rotate(-1deg);transform: translate(1px, -2px) rotate(-1deg); }                          }                          @keyframes guiShaking {                            0% { transform: translate(2px, 1px) rotate(0deg); }                            10% { transform: translate(-1px, -2px) rotate(-1deg); }                            20% { transform: translate(-3px, 0px) rotate(1deg); }                            30% { transform: translate(0px, 2px) rotate(0deg); }                            40% { transform: translate(1px, -1px) rotate(1deg); }                            50% { transform: translate(-1px, 2px) rotate(-1deg); }                            60% { transform: translate(-3px, 1px) rotate(0deg); }                            70% { transform: translate(2px, 1px) rotate(-1deg); }                            80% { transform: translate(-1px, -1px) rotate(1deg); }                            90% { transform: translate(2px, 2px) rotate(0deg); }                            100% { transform: translate(1px, -2px) rotate(-1deg); }                          }                          .gui-anime-shaking-inline,                          .gui-anime-shaking {                            display:block;                            position: relative;                            -webkit-animation-name: guiShaking;                            -webkit-animation-duration: <t>s;                            -webkit-animation-delay: <d>s;                            -webkit-transform-origin:50% 50%;                            -webkit-animation-iteration-count: 1;                            -webkit-animation-timing-function: linear;                            -moz-animation-name: guiShaking;                            -moz-animation-duration: <t>s;                            -moz-animation-delay: <d>s;                            -moz-transform-origin:50% 50%;                            -moz-animation-iteration-count: 1;                            -moz-animation-timing-function: linear;                            animation-name: guiShaking;                            animation-duration: <t>s;                            animation-delay: <d>s;                            transform-origin:50% 50%;                            animation-iteration-count: 1;                            animation-timing-function: linear;                          }                          .gui-anime-shaking-inline {                            display: inline-block;                        }",{t:r/1e3,d:i/1e3},/<([^<>]+)>/g))}catch(s){n&&n(t);return}this.shakingCssAdded=!0}t.css("display")==="inline"?t.addClass("gui-anime-shaking-inline"):t.addClass("gui-anime-shaking"),setTimeout(o,r+i)}}}),define("lib/Count",["lib/Anime"],function(e){"use strict";function n(e,n,r,i){var s=t.exec(e.text()),o;o=+s[2]+n,r!=null&&(o=Math.max(r,o)),i!=null&&(o=Math.min(i,o)),e.text(s?(s[1]||"")+o+(s[3]||""):"")}function r(e,n,r,i){var s=t.exec(e.text());r!=null&&(n=Math.max(r,n)),i!=null&&(n=Math.min(i,n)),e.text(s?(s[1]||"")+n+(s[3]||""):"")}var t=/([^\-0-9]+)?([\-0-9]+)([\w\W]+)?/;return function(t,i,s){var o=$(t);this.add=function(t,r){return n(o,t,i,s),r&&e[r](o),this},this.set=function(e){return r(o,e,i,s),this}}}),define("lib/cookies",{get:function(e){"use strict";if(document.cookie.length>0){var t,n=document.cookie.indexOf(e+"=");if(n!=-1)return n=n+e.length+1,t=document.cookie.indexOf(";",n),t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(n,t))}return""},set:function(e,t,n,r){"use strict";return document.cookie=e+"="+escape(t)+(n==null?"":";expires="+n.toGMTString())+";path="+(r||"/"),this},remove:function(e,t){"use strict";var n=new Date;n.setTime(n.getTime()-1);var r=this.get(e);r!=null&&(document.cookie=e+"="+r+";expires="+n.toGMTString()+";path="+(t||"/"))}}),define("lib/Base",[],function(){"use strict";var e=function(){};return e.extend=function(e,t){var n=t||this;for(var r in n)n.hasOwnProperty(r)&&r!=="prototype"&&(e[r]=n[r]);for(var i in n.prototype)n.prototype.hasOwnProperty(i)&&(e.prototype[i]=n.prototype[i])},e}),define("lib/Event",["lib/Base"],function(e){"use strict";function o(){}var t=Array.prototype.slice,n=Object.prototype.toString,r=function(e){return typeof e=="object"?e===null?"null":/\[object (\w+)\]/.exec(n.call(e))[1].toLowerCase():typeof e},i=function(e,t,n){var i,s,o,u=Array.prototype.forEach;n=n||this;if(e==null)return;if(u&&e.forEach===u)e.forEach(t,n);else if(r(e)==="array")for(s=0,o=e.length;s<o;s++)t.call(n,e[s],s,e);else for(var a in e)ObjectProto.hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)},s=function(e,t,n){var i,s,o,u,a=Array.prototype.filter;n=n||this;if(e==null)return;if(a&&e.filter===a)return e.filter(t,n);if(r(e)==="array"){u=[];for(s=0,o=e.length;s<o;s++)t.call(n,e[s],s,e)&&u.push(e[s])}else{u={};for(var f in e)ObjectProto.hasOwnProperty.call(e,f)&&t.call(n,e[f],f,e)&&(u[f]=e[f])}return u};return o.prototype.on=function(e,t,n,r){return this.eventQueue=this.eventQueue||{},this.eventQueue[e]=this.eventQueue[e]||[],this.eventQueue[e].push({callback:t,context:n,once:r}),this},o.prototype.off=function(e,t){this.eventQueue=this.eventQueue||{};if(this.eventQueue[e]==null)return;return t?(this.eventQueue[e]=s(this.eventQueue[e],function(e,n){return e.callback!==t}),this.eventQueue[e].length===0&&delete this.eventQueue[e]):delete this.eventQueue[e],this},o.prototype.fire=function(e,n){this.eventQueue=this.eventQueue||{};var r=this.eventQueue[e],s=!0;if(r){var o=t.call(arguments,1);i(r,function(t){t.callback.apply(t.context,o)===!1&&(s=!1),t.once&&this.off(e,t.callback)},this)}return s},e.extend(o),o}),define("lib/Overlay",["lib/support","lib/Event","lib/m"],function(e,t,n){"use strict";function y(e){var t,n;e?(t=(u.height()-h.height())/2+(document.documentElement.scrollTop||window.pageYOffset||0),n=(u.width()-h.width())/2+(document.documentElement.scrollLeft||window.pageXOffset||0)):(t=(u.height()-h.height())/2,n=(u.width()-h.width())/2),h.css({top:t,left:n})}function b(e,t){v&&v.length&&v.css({opacity:e||.5,"background-color":t||"#000"}).show()}function w(){v&&v.length&&v.remove()}function E(){v.css({top:document.documentElement.scrollTop||window.pageYOffset||0,left:document.documentElement.scrollLeft||window.pageXOffset||0})}function S(){v.css({width:u.width(),height:u.height()})}function x(t){i=t,s='<div id="blockWindow" class="'+i+'-block">                           <div class="'+i+'-block-b">                               <h4 class="'+i+'-block-hd">                                   <span id="blockTitle"></span>                                   <a id="blockClose" class="block-close" href="#" title="关闭">X</a>                               </h4>                               <div id="blockContent" class="'+i+'-block-bd"></div>                           </div>                       </div>',h=$(s),h.appendTo("body"),p=$(a),d=$(f),g=[h,p],navigator.userAgent.match(/iPad|iPhone/i)!==null?c=navigator.userAgent.match(/[5-9]_[0-9]/)!==null:(c=e.fixed(),u.resize(function(){m&&m.pos()})),h.delegate(l,"click",function(e){e.preventDefault(),m&&m.close()})}function T(e,t,n,r){this._isOpen=!1,x.call(this,r),this._fixed=c,e&&!r&&this.open(e,t,n)}var r=0,i,s,o='<iframe src="{v}" id="blockIframe" class="block-iframe" frameborder="0" width="100%"></iframe>',u=$(window),a="#blockContent",f="#blockTitle",l="#blockClose",c,h,p,d,v,m,g;return T.prototype={openCallBack:function(e){return e&&this.on("open",e,this),this},closeCallBack:function(e){return e&&this.on("close",e,this),this},afterClose:function(e){return e&&this.on("afterClose",e,this),this},afterOpen:function(e){return e&&this.on("afterOpen",e,this),this},isOpen:function(){return this._isOpen},close:function(){return this._isOpen?this.fire("close",g)?(h.remove(),this._isOpen=!1,m=null,this.fire("afterClose",g),this):this:this},open:function(e,t,r){return this.fire("open",g)?(m&&m!==this&&m.close(),m=this,this.undelegate(),t&&this.delegate(t),e&&!n.isHtml(e)&&(e=n.format(o,e)),p.html(e||""),this._title&&d.html(this._title),this._width&&h.width(this._width),this._height&&h.height(this._height),h.css("position",!this._fixed||!c?"absolute":"fixed"),this.pos(),h.show(),this._isOpen=!0,r&&r.call(this,p),this.fire("afterOpen",g),this):this},delegate:function(e){if(!e.length){p.delegate(e.selector,e.event,e.func);return}return n.each(e,function(e){this.delegate(e.selector,e.event,e.func)},p),this},undelegate:function(){return p.undelegate(),this},pos:function(){return y(!this._fixed||!c),this},title:function(e){return this._title=e,this._isOpen&&d.html(e),this},width:function(e){return this._width=e,this._isOpen&&(h.width(e),this.pos()),this},height:function(e){return this._height=e,this._isOpen&&(h.height(e),this.pos()),this},pin:function(){if(this._fixed||!c)return;return this._fixed=!0,this._isOpen&&(h.css("position","fixed"),this.pos()),this},unpin:function(){if(!this._fixed)return;return this._fixed=!1,this._isOpen&&(h.css("position","absolute"),this.pos()),this},showCover:function(e,t){v=$('<div id="blockCover" style="position:fixed;top:0;left:0;right:0;bottom:0;display:none;z-index:'+((parseInt(h.css("z-index"),10)||0)-1)+';"></div>').appendTo("body");var n=this;return this.on("afterClose",function(){w()}).on("afterOpen",function(){b(n._coverOpacity,n._coverColor)}),typeof e=="string"&&(t=e,e=null),e&&(this._coverOpacity=e),t&&(this._coverColor=t),b(e||this._coverOpacity,t||this._coverColor),this},hideCover:function(){return w(),this}},t.extend(T),T}),define("lib/TextUtils",[],function(){"use strict";function c(e,t){var n=typeof e[t];return n==="function"||n=="object"&&!!e[t]||n=="unknown"}function h(t,n){return typeof t[n]!=e}function p(e,t){return typeof e[t]=="object"&&!!e[t]}function d(e){window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: "+e)}function v(t,n,r){return n<0&&(n+=t.value.length),typeof r==e&&(r=n),r<0&&(r+=t.value.length),{start:n,end:r}}function m(e,t,n){return{start:t,end:n,length:n-t,text:e.value.slice(t,n)}}function g(){return p(document,"body")?document.body:document.getElementsByTagName("body")[0]}function w(e,t){return function(){var n=this.jquery?this[0]:this,r=n.nodeName.toLowerCase();if(n.nodeType==1&&(r=="textarea"||r=="input"&&n.type=="text")){var i=[n].concat(Array.prototype.slice.call(arguments)),s=e.apply(this,i);if(!t)return s}if(t)return this}}var e="undefined",t,n,r,i,s,o,u,a,f,l,y=document.createElement("textarea");g().appendChild(y);if(h(y,"selectionStart")&&h(y,"selectionEnd")&&c(y,"setSelectionRange"))t=function(e){var t=e.selectionStart,n=e.selectionEnd;return m(e,t,n)},n=function(e,t,n){var r=v(e,t,n);e.focus(),e.setSelectionRange(r.start,r.end)},f=function(e,t){t?e.selectionEnd=e.selectionStart:e.selectionStart=e.selectionEnd};else{if(!(c(y,"createTextRange")&&p(document,"selection")&&c(document.selection,"createRange"))){g().removeChild(y),d("No means of finding text input caret position");return}t=function(e){e.focus();var t=0,n=0,r,i,s,o,u=document.selection.createRange();return u&&u.parentElement()==e&&(s=e.value.length,r=e.value.replace(/\r\n/g,"\n"),i=e.createTextRange(),i.moveToBookmark(u.getBookmark()),o=e.createTextRange(),o.collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?t=n=s:(t=-i.moveStart("character",-s),t+=r.slice(0,t).split("\n").length-1,i.compareEndPoints("EndToEnd",o)>-1?n=s:(n=-i.moveEnd("character",-s),n+=r.slice(0,n).split("\n").length-1))),m(e,t,n)};var b=function(e,t){return t-(e.value.slice(0,t).split("\r\n").length-1)};n=function(e,t,n){var r=v(e,t,n),i=e.createTextRange(),s=b(e,r.start);i.collapse(!0),r.start==r.end?i.move("character",s):(i.moveEnd("character",b(e,r.end)),i.moveStart("character",s)),i.select()},f=function(e,t){var n=document.selection.createRange();n.collapse(t),n.select()}}g().removeChild(y),i=function(e,t,r,i){var s;t!=r&&(s=e.value,e.value=s.slice(0,t)+s.slice(r)),i&&n(e,t,t)},r=function(e){var n=t(e);i(e,n.start,n.end,!0)},a=function(e){var r=t(e),i;return r.start!=r.end&&(i=e.value,e.value=i.slice(0,r.start)+i.slice(r.end)),n(e,r.start,r.start),r.text},l=function(e,t){t==null&&(t=e.value.length),n(e,t,t)},s=function(e,t,r,i){var s=e.value,o;e.value=s.slice(0,r)+t+s.slice(r),i&&(o=r+t.length,n(e,o,o))},o=function(e,r){var i=t(e),s=e.value;e.value=s.slice(0,i.start)+r+s.slice(i.end);var o=i.start+r.length;n(e,o,o)},u=function(e,r,i){var s=t(e),o=e.value;e.value=o.slice(0,s.start)+r+s.text+i+o.slice(s.end);var u=s.start+r.length,a=u+s.length;n(e,u,a)},$.fn.extend({getSelection:w(t,!1),setSelection:w(n,!0),collapseSelection:w(f,!0),deleteSelectedText:w(r,!0),deleteText:w(i,!0),extractSelectedText:w(a,!1),insertText:w(s,!0),replaceSelectedText:w(o,!0),surroundSelectedText:w(u,!0),insertCaret:w(l,!0)})}),define("lib/accessToken",["lib/cookies"],function(e){"use strict";var t,n=window.location.host,r=window.url_re_signin||"",i=window.client_id||32353;return t=e.get("_"+i+"_access_token"),{checkToken:function(){return typeof t=="string"?!0:!1},getToken:function(){return t}}}),define("lib/tmpl",[],function(){function e(e){return String(e).replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,">").replace(/"/g,""")}var t={entities:e};return function(n,r){/\W/.test(n)||(n=document.getElementById(n).innerHTML);var i=new Function("funcs, obj","var p=[],print=function(){p.push.apply(p,arguments);};with(funcs){with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',entities($1),'").replace(/\t:=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}}return p.join('');");return r?i(t,r):function(e){return i(t,e)}}}),function(){function n(e){this.message=e}var e=typeof exports!="undefined"?exports:this,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){var r=String(e);for(var i,s,o=0,u=t,a="";r.charAt(o|0)||(u="=",o%1);a+=u.charAt(63&i>>8-o%1*8)){s=r.charCodeAt(o+=.75);if(s>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|s}return a}),e.atob||(e.atob=function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var i=0,s,o,u=0,a="";o=r.charAt(u++);~o&&(s=i%4?s*64+o:o,i++%4)?a+=String.fromCharCode(255&s>>(-2*i&6)):0)o=t.indexOf(o);return a})}(),define("Base64",function(){}),function(e){"use strict";function a(e){var t=0,n;for(n=0;n<e.length;n++)t=e.charCodeAt(n)+(t<<6)+(t<<16)-t<<0;return t}function f(){return e.devicePixelRatio||1}function l(e,t,n,r){var i,s,o,u="",f=e.length;t=t.replace(/^\/+/,""),f>1?(s=a(t)%f,s<0&&(s+=3),o=e[s]):o=e[0],i="http://"+o+"/"+encodeURI(t);if(n&&r)u+="/1";else if(n||r)u+="/3";return n&&(u+="/w/"+n),r&&(u+="/h/"+r),u!==""&&(i=i+"?imageView2"+u),i}function c(e){return e.indexOf("dev.guokr.com")>0}function h(e,t,n){var s,a,f,h,p=r.createElement("a"),d=c(e)?o:u;p.href=e,h=p.pathname;if(h.indexOf("/image/")===0)h=h.slice(7);else if(h.indexOf("image/")===0)h=h.slice(6);else if(h.indexOf("/thumbnail/")===0||h.indexOf("thumbnail/")===0)f=e.replace(i,"$2"),s=f.slice(-2),a={dJ:".gif",pQ:".jpg",BO:".png"}[s],h=f+a;return l(d,h,t,n)}function p(e,t,r){var o={src:e,width:null,height:null,"data-hashkey":null,"data-orig-width":null,"data-orig-height":null};if(!i.test(e))return s.test(e)&&(o.src=h(e)),o;o.src=e=h(e);var u=f(),a=e.replace(i,"$2"),l=n(a.replace(/_/g,"/").replace(/-/g,"+")),c=l.charCodeAt(32)+l.charCodeAt(33)*256+l.charCodeAt(34)*65536+l.charCodeAt(35)*16777216,p=l.charCodeAt(36)+l.charCodeAt(37)*256+l.charCodeAt(38)*65536+l.charCodeAt(39)*16777216;o["data-hashkey"]=a,o["data-orig-width"]=c,o["data-orig-height"]=p;if(t===undefined&&r>0)t=r*c/p;else if(r===undefined&&t>0)r=t*p/c;else if(t<1||r<1)return o;if(c<t*u||p<r*u)u=1,c>t&&p>r?u=Math.min(c/t,p/r):(t=c>t?t:c,r=p>r?r:p);o.width=Math.round(t),o.height=Math.round(r),t=Math.round(t*u),r=Math.round(r*u);if(Math.abs(c-t)>1||Math.abs(p-r)>1)o.src=h(e,t,r);return o}function d(e){if(i.test(e)||s.test(e))e=h(e);return e}var t,n=e.atob||require("Base64").atob,r=e.document||require("jsdom").jsdom(),i=/^http:\/\/(img1\.(?:\w+\.)?guokr\.com(?:\:\d+)?\/(?:image|thumbnail)|\d+\.im(?:\.dev)?\.guokr\.com(?:\:\d+)?)\/([\w-]{56})(?:_\d*x\d*)?\.(jpg|png|gif)(\?.*|$)/,s=/^(http:\/\/(?:\w+\.)*guokr\.com(?:\:\d+)?)?(\/gkimage\/[a-z0-9\/]{15}\.(gif|jpe?g|png))(\?.*|$)/,o=["1.im.dev.guokr.com","2.im.dev.guokr.com","3.im.dev.guokr.com"],u=["1.im.guokr.com","2.im.guokr.com","3.im.guokr.com"];t={sdbm:a,thumbnail:p,original:d,public_url:h},typeof define=="function"&&define.amd?define("lib/gkimage",["Base64"],function(){return t}):typeof e!="undefined"?(typeof module!="undefined"&&module.exports&&(e=module.exports=t),e.gkimage=t):window.gkimage=t}(typeof exports=="object"&&exports||this),define("lib/gbbcode",["jquery","lib/gkimage"],function(t,n){"use strict";function u(e){return/www\.tudou\.com/.test(e)?e+="&autoPlay=true":/www\.56\.com/.test(e)?e+="?auto=1":/player\.video\.qiyi\.com/.test(e)&&(e+="-autoPlay=1"),e}function a(e){var r=/src="[^"]+"/;e.each(function(){var e,r,i,s,o,u=t(this),a=u.parents(".gbbcode-content"),f=u.data("image"),l=t("<img>");u.replaceWith(l),i=l.css("max-width"),i!==null&&i.slice(-2)==="px"?i=parseInt(i):i=a.width(),s=i,o=l.parent(),o.css("display")==="block"&&(s=o.width()||s),r=Math.min(i,s),e=n.thumbnail(f,r),e.width===null?l.attr("src",e.src):l.attr(e)})}function f(e){e.each(function(){var e=t(this);e.attr("src",e.attr("src").replace(/\.svg$/,".png"))})}function l(e,r){var s=[];e.each(function(){var e=t(this).data("video-loaded"),n=t(this).data("video");e!==!0&&s.indexOf(n)<0&&s.push(n)});if(s.length===0)return;t.ajax({url:"/apis/shortener/url.json",type:"post",data:{url:s},dataType:"json",traditional:!0,success:function(o){if(!o.ok)return;s=[],e.each(function(){var e=t(this),r=e.parents(".gbbcode-content"),s=e.data("video"),a=o.result[s].extradata,f=o.result[s].urltype,l=e.width(),c=e.height();if(!a||a.player_type===undefined)return;var h,p,d=a.preview_image,v=u(a.player_url),m=a.player_type,g=a.title+" - "+f.title,y=n.thumbnail(d,l,c);e.attr("title",g).css("background-image","url("+y.src+")").bind("click touch",function(n){var s,o;if(m==="flash"&&i===!1){e.attr("target","_blank");return}n.preventDefault(),e.css("display","none"),p===undefined?p=t('<a data-collapsed href="javascript: void(0)">↑ 收起</a>').data("collapsed",!1).insertAfter(e).bind("click touch",function(t){t.preventDefault();if(p.data("collapsed")===!0)return;h.remove(),h=undefined,e.css("display","block"),p.css("display","none").data("collapsed",!0)}):p.css("display","block").data("collapsed",!1);if(h!==undefined)return;h=t("<iframe>").attr({src:v,frameborder:0,allowfullscreen:!0}).insertAfter(e),o=h.css("max-width"),o!==null&&o.slice(-2)==="px"?o=parseInt(o):o=r.width(),s=Math.min(o,h.parent().width()||o),h.attr({width:s,height:s*9/12})}).data("video-loaded",!0)}),r instanceof Function&&r()}})}function c(e){e.each(function(){var e=t(this);e.bind("load",function(){e.height(e.contents().find("body").height()+50)}),e.height(e.contents().find("body").height()+50)})}var r=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1"),i=!1;try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");s&&(i=!0)}catch(o){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==undefined&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(i=!0)}return function(e){e===undefined&&(e={}),e.imageSelector=e.imageSelector||"noscript[data-image]",e.videoSelector=e.videoSelector||"a[data-video]",e.mathSelector=e.mathSelector||"img[data-math]",e.pollSelector=e.pollSelector||"iframe[data-poll]",a(t(e.imageSelector)),l(t(e.videoSelector)),c(t(e.pollSelector)),r!==!0&&f(t(e.mathSelector))}}),define("academyApi",["lib/accessToken"],function(e){function i(e,t,n,i,s){var o=s===0?"discussion_id":"id";data={opinion:t,access_token:r},data[o]=e,$.ajax({url:i,data:data,type:"POST",success:function(e){e.ok&&n&&n()},dataType:"json"})}function s(e,r,s){return i(e,r,s,t.community_post_recommend,n.community)}function o(e,r,s){return i(e,r,s,t.course_post_recommend,n.course)}function u(e,t,n,i){var s=i===0?"discussion_id":"id";data={access_token:r},data[s]=e;var o=$.param(data);$.ajax({url:n+"?"+o,type:"DELETE",success:function(e){e.ok&&t&&t()},dataType:"json"})}function a(e,r){return u(e,r,t.community_post_reply,n.community)}function f(e,r){return u(e,r,t.course_post_reply,n.course)}function l(e,t,n,i){var s=i===0?"discussion_id":"id";data={access_token:r},data[s]=e;var o=$.param(data);$.ajax({url:n+"?"+o,type:"DELETE",success:function(e){e.ok&&t&&t()},dataType:"json"})}function c(e,r){return l(e,r,t.community_post,n.community)}function h(e,r){return l(e,r,t.course_post,n.course)}function p(e,t,n,i,s,o){var u=o===0?"discussion_id":"id";data={action:t,opinion:n,access_token:r},data[u]=e,$.ajax({url:s,data:data,type:"PUT",success:function(e){e.ok&&i&&i()},dataType:"json"})}function d(e,r,i,s){return p(e,r,i,s,t.community_post,n.community)}function v(e,r,i,s){return p(e,r,i,s,t.course_post,n.course)}var t={cmtCmt:"/apis/academy/review_reply.json",community_post_recommend:"/apis/academy/post_recommend.json",course_post_recommend:"/apis/academy/discussion_recommend.json",community_post_reply:"/apis/academy/post_reply.json",course_post_reply:"/apis/academy/discussion_reply.json",community_post:"/apis/academy/post.json",course_post:"/apis/academy/discussion.json"},n={course:0,community:1},r=e.getToken();return{editBlackboard:function(e,t){$.ajax({url:"/apis/academy/post_intro.json",data:{introduction:e,access_token:r},type:"PUT",success:function(e){e.ok&&t&&t()},dataType:"json"})},zanCommunityPost:s,zanCoursePost:o,deleteCommunityPost:c,deleteCoursePost:h,deleteCommunityPostCmt:a,deleteCoursePostCmt:f,doCommunityPost:d,doCoursePost:v,doPostClass:function(e,t,n){$.ajax({url:"/apis/academy/post_class.json",data:{class_id:t,post_id:e,access_token:r},type:"PUT",success:function(e){e.ok&&n&&n()},dataType:"json"})},getSimilarCourse:function(e,t){return e.length>100?!1:$.ajax({url:"/apis/academy/course_name.json",data:{name:e,limit:5,access_token:r},success:function(e){if(e.ok){var n=0,r=[];for(;n<e.result.length;n++)r.push({name:e.result[n].name,cname:e.result[n].cname,id:e.result[n].id});t(r)}},type:"get",dataType:"json",global:!1})},postCmtCmt:function(e,n,i){if(n.length>300){alert("评论字数不能超过300哦～");return}$.ajax({url:t.cmtCmt,data:{review_id:e,content:n,access_token:r},type:"POST",success:function(e){e.ok&&i&&i(e)},dataType:"json"})},getCmtCmt:function(e,n,i,s){$.ajax({url:t.cmtCmt+"?random="+Math.random(),data:{id:e,offset:n,limit:i,access_token:r},type:"GET",success:function(e){e.ok&&s&&s(e)},dataType:"json"})},delCmtCmt:function(e,n){var i=$.param({id:e,access_token:r});$.ajax({url:t.cmtCmt+"?"+i,type:"DELETE",success:function(e){e.ok&&n&&n(e)},dataType:"json"})}}}),define("lib/jquery/easing",[],function(){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}})}),define("lib/scrollTo",["lib/jquery/easing"],function(e){"use strict";function n(e){var t=window.scrollX||window.pageXOffset||document.documentElement.scrollLeft,n=window.scrollY||window.pageYOffset||document.documentElement.scrollTop,r=n+(window.innerHeight||document.documentElement.clientHeight),i=t+(window.innerWidth||document.documentElement.clientWidth),s=e.scrollLeft,o=e.scrollTop,u=s+(e.width||0),a=o+(e.height||0),f=!1,l=!1;if(s!=null&&s<t||u>i)f=!0;if(o!=null&&o<n||a>r)l=!0;return f&&l?3:l?2:f?1:0}var t=$("html,body");return function(e,r,i,s,o){function p(){t.animate(f,c||1e3,"easeInOutCirc",i?function e(){e.exed&&i(),e.exed=!0}:null)}var u=typeof e=="number",a=u?{top:e,left:e}:e.offset?e.offset():e,f={},l,c,h;typeof s=="number"?(c=s,h=typeof o=="string"?o:"top"):typeof s=="string"?(c=1e3,h=s):(c=1e3,h=u?"top":"all");switch(h){case"all":f.scrollTop=a.top,f.scrollLeft=a.left;break;case"top":f.scrollTop=a.top;break;case"left":f.scrollLeft=a.left;break;default:return}e.jquery&&(f.width=e.width(),f.height=e.height()),l=n(f),e.jquery&&(delete f.width,delete f.height);if(r)return p(),!0;switch(l){case 0:return i&&i(),!1;case 1:return delete f.scrollTop,p(),!0;case 2:return delete f.scrollLeft,p(),!0;case 3:return p(),!0;default:}}}),function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};e.fn.bxSlider=function(r){if(this.length==0)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(r)}),this;var s={},o=this;t.el=this;var u=e(window).width(),a=e(window).height(),f=function(){s.settings=e.extend({},n,r),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp=s.settings.mode=="vertical"?"top":"left",s.usingCSS=s.settings.useCSS&&s.settings.mode!="fade"&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(e.style[t[n]]!==undefined)return s.cssPrefix=t[n].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),s.settings.mode=="vertical"&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),l()},l=function(){o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:s.settings.mode=="horizontal"?s.children.length*100+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing");var t=m();s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:d()}),s.settings.pager||s.viewport.parent().css({margin:"0 auto 0px"}),s.children.css({"float":s.settings.mode=="horizontal"?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",v()),s.settings.mode=="horizontal"&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),s.settings.mode=="vertical"&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),s.settings.mode=="fade"&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&N(),s.active.last=s.settings.startSlide==g()-1,s.settings.video&&o.fitVids();var n=s.children.eq(s.settings.startSlide);s.settings.preloadImages=="all"&&(n=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.pager&&S(),s.settings.controls&&x(),s.settings.auto&&s.settings.autoControls&&T(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),c(n,h)},c=function(t,n){var r=t.find("img, iframe").length;if(r==0){n();return}var i=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++i==r&&n()}).each(function(){this.complete&&e(this).load()})})},h=function(){if(s.settings.infiniteLoop&&s.settings.mode!="fade"&&!s.settings.ticker){var t=s.settings.mode=="vertical"?s.settings.minSlides:s.settings.maxSlides,n=s.children.slice(0,t).clone().addClass("bx-clone"),r=s.children.slice(-t).clone().addClass("bx-clone");o.append(n).prepend(r)}s.loader.remove(),b(),s.settings.mode=="vertical"&&(s.settings.adaptiveHeight=!0),s.viewport.height(p()),o.redrawSlider(),s.settings.onSliderLoad(s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",U),s.settings.auto&&s.settings.autoStart&&(g()>1||s.settings.autoSlideForOnePage)&&H(),s.settings.ticker&&B(),s.settings.pager&&M(s.settings.startSlide),s.settings.controls&&P(),s.settings.touchEnabled&&!s.settings.ticker&&F()},p=function(){var t=0,n=e();if(s.settings.mode!="vertical"&&!s.settings.adaptiveHeight)n=s.children;else if(!s.carousel)n=s.children.eq(s.active.index);else{var r=s.settings.moveSlides==1?s.active.index:s.active.index*y();n=s.children.eq(r);for(i=1;i<=s.settings.maxSlides-1;i++)r+i>=s.children.length?n=n.add(s.children.eq(i-1)):n=n.add(s.children.eq(r+i))}return s.settings.mode=="vertical"?(n.each(function(n){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),s.viewport.css("box-sizing")=="border-box"?t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):s.viewport.css("box-sizing")=="padding-box"&&(t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),t},d=function(){var e="100%";return s.settings.slideWidth>0&&(s.settings.mode=="horizontal"?e=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:e=s.settings.slideWidth),e},v=function(){var e=s.settings.slideWidth,t=s.viewport.width();return s.settings.slideWidth==0||s.settings.slideWidth>t&&!s.carousel||s.settings.mode=="vertical"?e=t:s.settings.maxSlides>1&&s.settings.mode=="horizontal"&&(t>s.maxThreshold||t<s.minThreshold&&(e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides)),e},m=function(){var e=1;if(s.settings.mode=="horizontal"&&s.settings.slideWidth>0)if(s.viewport.width()<s.minThreshold)e=s.settings.minSlides;else if(s.viewport.width()>s.maxThreshold)e=s.settings.maxSlides;else{var t=s.children.first().width()+s.settings.slideMargin;e=Math.floor((s.viewport.width()+s.settings.slideMargin)/t)}else s.settings.mode=="vertical"&&(e=s.settings.minSlides);return e},g=function(){var e=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=Math.ceil(s.children.length/y());else{var t=0,n=0;while(t<s.children.length)++e,t=n+m(),n+=s.settings.moveSlides<=m()?s.settings.moveSlides:m()}else e=Math.ceil(s.children.length/m());return e},y=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=m()?s.settings.moveSlides:m()},b=function(){if(s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop){if(s.settings.mode=="horizontal"){var e=s.children.last(),t=e.position();w(-(t.left-(s.viewport.width()-e.outerWidth())),"reset",0)}else if(s.settings.mode=="vertical"){var n=s.children.length-s.settings.minSlides,t=s.children.eq(n).position();w(-t.top,"reset",0)}}else{var t=s.children.eq(s.active.index*y()).position();s.active.index==g()-1&&(s.active.last=!0),t!=undefined&&(s.settings.mode=="horizontal"?w(-t.left,"reset",0):s.settings.mode=="vertical"&&w(-t.top,"reset",0))}},w=function(e,t,n,r){if(s.usingCSS){var i=s.settings.mode=="vertical"?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),t=="slide"?(o.css(s.animProp,i),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),_()})):t=="reset"?o.css(s.animProp,i):t=="ticker"&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,i),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),w(r.resetValue,"reset",0),j()}))}else{var u={};u[s.animProp]=e,t=="slide"?o.animate(u,n,s.settings.easing,function(){_()}):t=="reset"?o.css(s.animProp,e):t=="ticker"&&o.animate(u,speed,"linear",function(){w(r.resetValue,"reset",0),j()})}},E=function(){var t="",n=g();for(var r=0;r<n;r++){var i="";s.settings.buildPager&&e.isFunction(s.settings.buildPager)?(i=s.settings.buildPager(r),s.pagerEl.addClass("bx-custom-pager")):(i=r+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+r+'" class="bx-pager-link">'+i+"</a></div>"}s.pagerEl.html(t)},S=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),E()),s.pagerEl.on("click","a",O)},x=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click",C),s.controls.prev.bind("click",k),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),!s.settings.nextSelector&&!s.settings.prevSelector&&(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},T=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",L),s.controls.autoEl.on("click",".bx-stop",A),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),D(s.settings.autoStart?"stop":"start")},N=function(){s.children.each(function(t){var n=e(this).find("img:first").attr("title");n!=undefined&&(""+n).length&&e(this).append('<div class="bx-caption"><span>'+n+"</span></div>")})},C=function(e){s.settings.auto&&o.stopAuto(),o.goToNextSlide(),e.preventDefault()},k=function(e){s.settings.auto&&o.stopAuto(),o.goToPrevSlide(),e.preventDefault()},L=function(e){o.startAuto(),e.preventDefault()},A=function(e){o.stopAuto(),e.preventDefault()},O=function(t){s.settings.auto&&o.stopAuto();var n=e(t.currentTarget);if(n.attr("data-slide-index")!==undefined){var r=parseInt(n.attr("data-slide-index"));r!=s.active.index&&o.goToSlide(r),t.preventDefault()}},M=function(t){var n=s.children.length;if(s.settings.pagerType=="short"){s.settings.maxSlides>1&&(n=Math.ceil(s.children.length/s.settings.maxSlides)),s.pagerEl.html(t+1+s.settings.pagerShortSeparator+n);return}s.pagerEl.find("a").removeClass("active"),s.pagerEl.each(function(n,r){e(r).find("a").eq(t).addClass("active")})},_=function(){if(s.settings.infiniteLoop){var e="";s.active.index==0?e=s.children.eq(0).position():s.active.index==g()-1&&s.carousel?e=s.children.eq((g()-1)*y()).position():s.active.index==s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&(s.settings.mode=="horizontal"?w(-e.left,"reset",0):s.settings.mode=="vertical"&&w(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter(s.children.eq(s.active.index),s.oldIndex,s.active.index)},D=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},P=function(){g()==1?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(s.active.index==0?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index==g()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},H=function(){if(s.settings.autoDelay>0)var e=setTimeout(o.startAuto,s.settings.autoDelay);else o.startAuto();s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},B=function(){var t=0;if(s.settings.autoDirection=="next")o.append(s.children.clone().addClass("bx-clone"));else{o.prepend(s.children.clone().addClass("bx-clone"));var n=s.children.first().position();t=s.settings.mode=="horizontal"?-n.left:-n.top}w(t,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&!s.usingCSS&&s.viewport.hover(function(){o.stop()},function(){var t=0;s.children.each(function(n){t+=s.settings.mode=="horizontal"?e(this).outerWidth(!0):e(this).outerHeight(!0)});var n=s.settings.speed/t,r=s.settings.mode=="horizontal"?"left":"top",i=n*(t-Math.abs(parseInt(o.css(r))));j(i)}),j()},j=function(e){speed=e?e:s.settings.speed;var t={left:0,top:0},n={left:0,top:0};s.settings.autoDirection=="next"?t=o.find(".bx-clone").first().position():n=s.children.first().position();var r=s.settings.mode=="horizontal"?-t.left:-t.top,i=s.settings.mode=="horizontal"?-n.left:-n.top,u={resetValue:i};w(r,"ticker",speed,u)},F=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart",I)},I=function(e){if(s.working)e.preventDefault();else{s.touch.originalPos=o.position();var t=e.originalEvent;s.touch.start.x=t.changedTouches[0].pageX,s.touch.start.y=t.changedTouches[0].pageY,s.viewport.bind("touchmove",q),s.viewport.bind("touchend",R)}},q=function(e){var t=e.originalEvent,n=Math.abs(t.changedTouches[0].pageX-s.touch.start.x),r=Math.abs(t.changedTouches[0].pageY-s.touch.start.y);n*3>r&&s.settings.preventDefaultSwipeX?e.preventDefault():r*3>n&&s.settings.preventDefaultSwipeY&&e.preventDefault();if(s.settings.mode!="fade"&&s.settings.oneToOneTouch){var i=0;if(s.settings.mode=="horizontal"){var o=t.changedTouches[0].pageX-s.touch.start.x;i=s.touch.originalPos.left+o}else{var o=t.changedTouches[0].pageY-s.touch.start.y;i=s.touch.originalPos.top+o}w(i,"reset",0)}},R=function(e){s.viewport.unbind("touchmove",q);var t=e.originalEvent,n=0;s.touch.end.x=t.changedTouches[0].pageX,s.touch.end.y=t.changedTouches[0].pageY;if(s.settings.mode=="fade"){var r=Math.abs(s.touch.start.x-s.touch.end.x);r>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())}else{var r=0;s.settings.mode=="horizontal"?(r=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(r=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(s.active.index==0&&r>0||s.active.last&&r<0)?w(n,"reset",200):Math.abs(r)>=s.settings.swipeThreshold?(r<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):w(n,"reset",200)}s.viewport.unbind("touchend",R)},U=function(t){if(!s.initialized)return;var n=e(window).width(),r=e(window).height();if(u!=n||a!=r)u=n,a=r,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index)};return o.goToSlide=function(t,n){if(s.working||s.active.index==t)return;s.working=!0,s.oldIndex=s.active.index,t<0?s.active.index=g()-1:t>=g()?s.active.index=0:s.active.index=t,s.settings.onSlideBefore(s.children.eq(s.active.index),s.oldIndex,s.active.index),n=="next"?s.settings.onSlideNext(s.children.eq(s.active.index),s.oldIndex,s.active.index):n=="prev"&&s.settings.onSlidePrev(s.children.eq(s.active.index),s.oldIndex,s.active.index),s.active.last=s.active.index>=g()-1,s.settings.pager&&M(s.active.index),s.settings.controls&&P();if(s.settings.mode=="fade")s.settings.adaptiveHeight&&s.viewport.height()!=p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),_()});else{s.settings.adaptiveHeight&&s.viewport.height()!=p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed);var r=0,i={left:0,top:0};if(!s.settings.infiniteLoop&&s.carousel&&s.active.last)if(s.settings.mode=="horizontal"){var u=s.children.eq(s.children.length-1);i=u.position(),r=s.viewport.width()-u.outerWidth()}else{var a=s.children.length-s.settings.minSlides;i=s.children.eq(a).position()}else if(s.carousel&&s.active.last&&n=="prev"){var f=s.settings.moveSlides==1?s.settings.maxSlides-y():(g()-1)*y()-(s.children.length-s.settings.maxSlides),u=o.children(".bx-clone").eq(f);i=u.position()}else if(n=="next"&&s.active.index==0)i=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1;else if(t>=0){var l=t*y();i=s.children.eq(l).position()}if("undefined"!=typeof i){var c=s.settings.mode=="horizontal"?-(i.left-r):-i.top;w(c,"slide",s.settings.speed)}}},o.goToNextSlide=function(){if(!s.settings.infiniteLoop&&s.active.last)return;var e=parseInt(s.active.index)+1;o.goToSlide(e,"next")},o.goToPrevSlide=function(){if(!s.settings.infiniteLoop&&s.active.index==0)return;var e=parseInt(s.active.index)-1;o.goToSlide(e,"prev")},o.startAuto=function(e){if(s.interval)return;s.interval=setInterval(function(){s.settings.autoDirection=="next"?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&e!=1&&D("stop")},o.stopAuto=function(e){if(!s.interval)return;clearInterval(s.interval),s.interval=null,s.settings.autoControls&&e!=1&&D("start")},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideCount=function(){return s.children.length},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).width(v()),s.viewport.css("height",p()),s.settings.ticker||b(),s.active.last&&(s.active.index=g()-1),s.active.index>=g()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(E(),M(s.active.index))},o.destroySlider=function(){if(!s.initialized)return;s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){e(this).data("origStyle")!=undefined?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),e(this).data("origStyle")!=undefined?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",U)},o.reloadSlider=function(e){e!=undefined&&(r=e),o.destroySlider(),f()},f(),this}}(jQuery),define("lib/jquery/bxslider",function(){}),!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define("lib/wxApi",[],function(){return t(e)}):t(e,!0)}(window,function(e,t){function n(t,n,r){e.WeixinJSBridge?WeixinJSBridge.invoke(t,i(n),function(e){o(t,e,r)}):f(t,r)}function r(t,n,r){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){r&&r.trigger&&r.trigger(e),o(t,e,n)}):r?f(t,r):f(t,n)}function i(e){return e=e||{},e.appId=N.appId,e.verifyAppId=N.appId,e.verifySignType="sha1",e.verifyTimestamp=N.timestamp+"",e.verifyNonceStr=N.nonceStr,e.verifySignature=N.signature,e}function s(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,"package":e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function o(e,t,n){var r,i,s;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,r=t.errMsg,r||(r=t.err_msg,delete t.err_msg,r=u(e,r,n),t.errMsg=r),n=n||{},n._complete&&(n._complete(t),delete n._complete),r=t.errMsg||"",N.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t)),i=r.indexOf(":"),s=r.substring(i+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function u(e,t){var n,r,i,s;if(t){switch(n=t.indexOf(":"),e){case d.config:r="config";break;case d.openProductSpecificView:r="openProductSpecificView";break;default:r=t.substring(0,n),r=r.replace(/_/g," "),r=r.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),r=r.substring(0,1).toLowerCase()+r.substring(1),r=r.replace(/ /g,""),-1!=r.indexOf("Wcpay")&&(r=r.replace("Wcpay","WCPay")),i=v[r],i&&(r=i)}s=t.substring(n+1),"confirm"==s&&(s="ok"),"failed"==s&&(s="fail"),-1!=s.indexOf("failed_")&&(s=s.substring(7)),-1!=s.indexOf("fail_")&&(s=s.substring(5)),s=s.replace(/_/g," "),s=s.toLowerCase(),("access denied"==s||"no permission to execute"==s)&&(s="permission denied"),"config"==r&&"function not exist"==s&&(s="ok"),t=r+":"+s}return t}function a(e){var t,n,r,i;if(e){for(t=0,n=e.length;n>t;++t)r=e[t],i=d[r],i&&(e[t]=i);return e}}function f(e,t){if(N.debug&&!t.isInnerInvoke){var n=v[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function l(){if(!("6.0.2">S||T.systemType<0)){var e=new Image;T.appId=N.appId,T.initTime=x.initEndTime-x.initStartTime,T.preVerifyTime=x.preVerifyEndTime-x.preVerifyStartTime,L.getNetworkType({isInnerInvoke:!0,success:function(t){T.networkType=t.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+T.version+"&o="+T.isPreVerifyOk+"&s="+T.systemType+"&c="+T.clientVersion+"&a="+T.appId+"&n="+T.networkType+"&i="+T.initTime+"&p="+T.preVerifyTime+"&u="+T.url;e.src=n}})}}function c(){return(new Date).getTime()}function h(t){b&&(e.WeixinJSBridge?t():m.addEventListener&&m.addEventListener("WeixinJSBridgeReady",t,!1))}function p(){L.invoke||(L.invoke=function(t,n,r){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,i(n),r)},L.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})}var d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;if(!e.jWeixin)return d={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},v=function(){var e,t={};for(e in d)t[d[e]]=e;return t}(),m=e.document,g=m.title,y=navigator.userAgent.toLowerCase(),b=-1!=y.indexOf("micromessenger"),w=-1!=y.indexOf("android"),E=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),S=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),x={initStartTime:c(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},T={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:E?1:w?2:-1,clientVersion:S,url:encodeURIComponent(location.href)},N={},C={_completes:[]},k={state:0,res:{}},h(function(){x.initEndTime=c()}),L={config:function(e){N=e,f("config",e);var t=N.check===!1?!1:!0;h(function(){var e,r,i;if(t)n(d.config,{verifyJsApiList:a(N.jsApiList)},function(){C._complete=function(e){x.preVerifyEndTime=c(),k.state=1,k.res=e},C.success=function(){T.isPreVerifyOk=0},C.fail=function(e){C._fail?C._fail(e):k.state=-1};var e=C._completes;return e.push(function(){N.debug||l()}),C.complete=function(){for(var t=0,n=e.length;n>t;++t)e[t]();C._completes=[]},C}()),x.preVerifyStartTime=c();else{for(k.state=1,e=C._completes,r=0,i=e.length;i>r;++r)e[r]();C._completes=[]}}),N.beta&&p()},ready:function(e){0!=k.state?e():(C._completes.push(e),!b&&N.debug&&e())},error:function(e){"6.0.2">S||(-1==k.state?e(k.res):C._fail=e)},checkJsApi:function(e){var t=function(e){var t,n,r=e.checkResult;for(t in r)n=v[t],n&&(r[n]=r[t],delete r[t]);return e};n("checkJsApi",{jsApiList:a(e.jsApiList)},function(){return e._complete=function(e){if(w){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=t(e)},e}())},onMenuShareTimeline:function(e){r(d.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||g,desc:e.title||g,img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareAppMessage:function(e){r(d.onMenuShareAppMessage,{complete:function(){n("sendAppMessage",{title:e.title||g,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){r(d.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){r(d.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){r("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){r("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"]},function(){return e._complete=function(e){if(w){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){n(d.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,n,r,i=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(n=i.indexOf(":"),r=i.substring(n+1)){case"wifi":case"edge":case"wwan":e.networkType=r;break;default:e.errMsg="getNetworkType:fail"}return e};n("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},n(d.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){n("hideOptionMenu",{},e)},showOptionMenu:function(e){n("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},n("closeWindow",{immediate_close:e.immediateClose||0},e)},hideMenuItems:function(e){n("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){n("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){n("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){n("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},n("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,n;E&&(t=e.resultStr,t&&(n=JSON.parse(t),e.resultStr=n&&n.scan_code&&n.scan_code.scan_result))},e}())},openProductSpecificView:function(e){n(d.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0},e)},addCard:function(e){var t,r,i,s,o=e.cardList,u=[];for(t=0,r=o.length;r>t;++t)i=o[t],s={card_id:i.cardId,card_ext:i.cardExt},u.push(s);n(d.addCard,{card_list:u},function(){return e._complete=function(e){var t,n,r,i=e.card_list;if(i){for(i=JSON.parse(i),t=0,n=i.length;n>t;++t)r=i[t],r.cardId=r.card_id,r.cardExt=r.card_ext,r.isSuccess=r.is_succ?!0:!1,delete r.card_id,delete r.card_ext,delete r.is_succ;e.cardList=i,delete e.card_list}},e}())},chooseCard:function(e){n("chooseCard",{app_id:N.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,r,i,s,o=e.cardList,u=[];for(t=0,r=o.length;r>t;++t)i=o[t],s={card_id:i.cardId,code:i.code},u.push(s);n(d.openCard,{card_list:u},e)},chooseWXPay:function(e){n(d.chooseWXPay,s(e),e)}},t&&(e.wx=e.jWeixin=L),L}),define("lib/wxShare",["lib/wxApi"],function(e){return function(t,n){return e.config({debug:n?n:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList}),{ready:function(t){e.ready(t)},error:function(t){e.error(t)},share:function(e){this.shareTimeline(e),this.shareAppMessage(e),this.shareQQ(e),this.shareWeibo(e)},shareTimeline:function(t){e.onMenuShareTimeline({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})},shareAppMessage:function(t){e.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){},cancel:function(){}})},shareQQ:function(t){e.onMenuShareQQ(t)},shareWeibo:function(t){e.onMenuShareWeibo(t)}}}}),require(["lib/m","lib/user","lib/bdShare","lib/Count","lib/cookies","lib/Overlay","lib/TextUtils","lib/accessToken","lib/tmpl","lib/gbbcode","academyApi","lib/scrollTo","lib/jquery/bxslider","lib/wxShare"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function E(e,t){var n=Date.fromString(e),r=Date.fromString(t),i=n.getTime()-r.getTime(),s=864e5,o=36e5,u=6e4,a=1e3,f="";return Math.floor(i/a)<=0?f="刚刚":i<u?f=Math.floor(i/a)+"秒前":i<o?f=Math.floor(i/u)+"分钟前":i<o*3?f=Math.floor(i/o)+"小时前":i<s&&r.getDate()==n.getDate()?(f="今天 ",f+=r.getHours()>9?r.getHours():"0"+r.getHours(),f+=":",f+=r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes()):(f=r.getFullYear(),f+="-",f+=r.getMonth()>8?r.getMonth()+1:"0"+(r.getMonth()+1),f+="-",f+=r.getDate()>9?r.getDate():"0"+r.getDate(),f+=" ",f+=r.getHours()>9?r.getHours():"0"+r.getHours(),f+=":",f+=r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes()),f}var d=".cmt_list-rep",v=u.getToken(),m=$("#shareWrap"),g=$("#courseTitle").attr("data-title"),y=$("video").attr("poster")||$(".course-img").src||"",b=["不说了，我要去上课了→","这课赞，不得不码→","居然还有这样的课程！看了3遍完全停不下来→","准备上这个课，先马一下→","我要上这个课！求监督→","这个实在太牛，我情不自禁地点下了分享按钮→","这个看上去好厉害的样子→","这课不上太可惜了，有人组队学不？","人家从没想过，世间竟有如此出尘绝艳之好课→","帅的人已经去上课了，丑的人还在刷微博→","别玩手机了快去学习→","我是一门好课，你想学我吗→","我要当学霸！谁拦我跟谁急！"],w=b[Math.floor(Math.random()*b.length)];replyAction={postCmt:function(e){function r(t){var n=e.parent(),r=e.parents("li").find(".cmtNum");n.siblings(".gbtxt").val(""),r.text(+r.text()+1);var i=t.result,s=n.siblings("ul"),o='<li>                                    <a href="../'+i.user_url+'" target="_blank">'+i.nickname+"</a>："+i.content+' -  刚刚   <a href="javascript: void 0" data-operation="delCmt" data-id="'+i.id+'">删除</a>  <a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>';if(s.length===0){var u=document.createElement("ul");u.className="cmts-list",u.innerHTML=o,n.parent()[0].appendChild(u)}else s.prepend($(o))}var t=e.data("id"),n=e.parent().siblings(".gbtxt").val();if(n===""){alert("评论不能为空哦～");return}l.postCmtCmt(t,n,r)},getCmt:function(e){function o(e){if(e.result.length===0){s.show(),s.find("textarea").focus();return}var t=document.createElement("ul"),r=e.now,o=e.result,u=o[0].review_id,f='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%> -  <%=date%>   <a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',l='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%> -  <%=date%>   <a href="javascript: void 0" data-operation="delCmt" data-id="<%=id%>">删除</a>  <a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',c='<li class="cmts-more-li"><a href="javascript: void 0" data-question="0" data-id="<%=review_id%>" data-total="<%=total%>" class="cmts-mort" data-operation="moreCmt">展开更多</a></li>',h="";t.className="cmts-list",$.each(o,function(e,t){var n=t.user_url,i=t.nickname,s=t.content,o=t.id,u=E(r,t.date_created);ukey===t.ukey_author?h+=a(l,{url:n,nickname:i,content:s,date:u,id:o}):h+=a(f,{url:n,nickname:i,content:s,date:u})}),n>i&&(h+=a(c,{review_id:u,total:n})),t.innerHTML=h,s[0].appendChild(t),s.show(),s.find("textarea").focus()}var t=e.data("id"),n=e.data("num"),r=0,i=20,s=e.parents(".cmt_list-cmt").next();l.getCmtCmt(t,r,i,o)},moreCmt:function(e){function s(t){var n=e.parent().parent(),r=t.now,i=t.result,s='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%> -  <%=date%>   <a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',o='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%> -  <%=date%>   <a href="javascript: void 0" data-operation="delCmt" data-id="<%=id%>">删除</a>  <a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',u="";e.parent().remove(),$.each(i,function(e,t){var n=t.user_url,i=t.nickname,f=t.content,l=t.id,c=E(r,t.date_created);ukey===t.ukey_author?u+=a(o,{url:n,nickname:i,content:f,date:c,id:l}):u+=a(s,{url:n,nickname:i,content:f,date:c})}),n.append($(u))}var t=e.data("id"),n=e.parent().siblings("li").length,r=+e.data("total")-20,i=e.parents(".cmt_list-cmt").next();l.getCmtCmt(t,n,r,s)},delCmt:function(e){function n(){var t=e.parents(".cmt_list-rep").siblings("cmt_list-cmt").find(".cmtNum");t.text(+t.text()-1),e.parent().remove()}var t=e.data("id");l.delCmtCmt(t,n)},reCmt:function(e){if(ukey){var t=e.closest(d),n=$("textarea",t),r="",i=n.val().trim(),s="：",o=i.split(s),u="回复@",a;$.each(e.siblings("a"),function(e,t){a=$.trim($(t).text());if(!/^@/.test(a))return r=a,!1}),u+=r,o.length>1&&/^回复/.test(o)?(o[0]=u,u=o.join(s)):u=u+s+i,n.val(u).insertCaret()}}},function(){var e=window.Date,t=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,}))?(Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/,n,r,i;if(e.parse("2011-11-29T15:52:30.5")!==1322599950500||e.parse("2011-11-29T15:52:30.52")!==1322599950520||e.parse("2011-11-29T15:52:18.867")!==1322599938867||e.parse("2011-11-29T15:52:18.867Z")!==1322581938867||e.parse("2011-11-29T15:52:18.867-03:30")!==1322594538867||e.parse("2011-11-29")!==13225248e5||e.parse("2011-11")!==13201056e5||e.parse("2011")!==129384e7)e.__parse=e.parse,n=-(new Date).getTimezoneOffset(),r=Math.floor(n/60),i=n%60,e.parse=function(n){var s=t.exec(n);return s?Date.UTC(s[1],(s[2]||1)-1,s[3]||1,s[4]-(s[8]?s[9]?s[9]+s[10]:0:r)||0,s[5]-(s[8]?s[9]?s[9]+s[11]:0:i)||0,s[6]||0,((s[7]||0)+"00").substr(0,3)):e.__parse.apply(this,arguments)};e.__fromString=e.fromString,e.fromString=function(n){return!e.__fromString||t.test(n)?new e(e.parse(n)):e.__fromString.apply(this,arguments)}}();var S=$("#courseGo"),x=S.attr("href"),T='<div class="block">                  <div class="block-title"></div>                  <div class="block-content">                    <p class="block-content-header">注册MOOC学院，不错过一门好课程！</p>                    <div>                      <a class="block-btn-primary" href="<%= signup %>" target="_blank" data-gaevent="course-signup:v3.0.0.0:academy">注册MOOC学院</a>                      <a class="block-btn-normal" href="<%= course_url%>" target="_blank" data-gaevent="course-direct-go:v3.0.0.0:academy">直接去上课</a>                    </div>                  </div>                </div>',N=a(T,{course_url:x,signup:url_signup});S.bind("showCourseGoOverlay",function(){var e=new s("","","","go");e.title("").width(560).height(290).open(N).showCover(.8,"#f9f9f9"),$("#blockCover").click(function(){e.close()})});var C=$(".comment_list"),k={focus:{act:'<a class="btn-undo" data-operation="act" data-action="focus" href="javascript: void 0;"><span class="icon-plus"></span>关注<span class="course-do-num courseDoNum"></span></a>',quit:'<a class="btn-done" data-operation="quit" data-action="focus" href="javascript: void 0;">已关注<span class="course-do-num courseDoNum"></span></a>'},learn:{act:'<a class="btn-undo" data-operation="act" data-action="learn" href="javascript: void 0;"><span class="icon-ok"></span>学过<span class="course-do-num courseDoNum"></span></a>',quit:'<a class="btn-done" data-operation="quit" data-action="learn" href="javascript: void 0;">已学过<span class="course-do-num courseDoNum"></span></a>'}},L={act:1,quit:-1},A={act:"POST",quit:"DELETE"},O={focus:new r("#courseFocus"),learn:new r("#courseLearn")},M={focus:function(e,t){var n=$.param({id:course_id,access_token:v}),r,i;e==="POST"?(r="/apis/academy/course_follower.json",i={id:course_id,access_token:v}):e==="DELETE"&&(r="/apis/academy/course_follower.json?"+n,i={}),$.ajax({url:r,data:i,type:e,success:function(e){e.ok&&t&&t()},dataType:"json"})},learn:function(e,t){var n=$.param({id:course_id,access_token:v}),r,i;e==="POST"?(r="/apis/academy/course_student.json",i={id:course_id,access_token:v}):e==="DELETE"&&(r="/apis/academy/course_student.json?"+n,i={}),$.ajax({url:r,data:i,type:e,success:function(e){e.ok&&t&&t()},dataType:"json"})},zan:function(e,t,n){$.ajax({url:"/apis/academy/review_helpful.json",data:{id:e,opinion:t,access_token:v},type:"POST",success:function(e){e.ok&&n&&n()},dataType:"json"})},deleteID:function(e,t){var n=$.param({id:e,access_token:v});$.ajax({url:"/apis/academy/review.json?"+n,type:"DELETE",success:function(e){e.ok&&t&&t()},dataType:"json"})},deleteTag:function(e,t){$.ajax({url:"/apis/academy/label_deactive.json",data:{course_label_id:e,is_active:"False",access_token:v},type:"PUT",success:function(e){e.ok&&t&&t()},dataType:"json"})}},_={login:function(e){var t='<div class="block">                  <div class="block-title"></div>                  <div class="block-content">                    <p class="block-content-header">确定清除标签“<%= tag %>”？</p>                    <div>                      <a class="block-btn-primary" id="tagGoodbye" href="javascript:void 0;">确定</a>                      <a class="block-btn-normal" id="tagRemain" href="javascript:void 0;">取消</a>                    </div>                  </div>                </div>';$(".deleteTag").click(function(){var e=$(this).siblings(".tag"),n=$(this).parent("li"),r=e.text(),i=e.data("id"),o=a(t,{tag:r}),u=new s("","","","tag");u.title("").width(560).height(290).open(o).showCover(.8,"#f9f9f9"),$("#blockCover").click(function(){u.close()}),$("#tagGoodbye").click(function(){M.deleteTag(i,function(){u.close(),n.remove()})}),$("#tagRemain").click(function(){u.close()})}),C.delegate(".cmtDel","click",function(e){var t=$(this),n=t.parents("li"),r=n.attr("id");confirm("确认删除点评？")&&M.deleteID(r,function(){n.slideUp()})}),C.delegate("input[data-operation=newCmt]","click",function(){var e=$(this);replyAction.postCmt(e)}),C.delegate("a[data-operation]","click",function(){var e=$(this),t=e.data("operation");t==="delCmt"?replyAction.delCmt(e):t==="reCmt"&&(replyAction.reCmt(e),e.parents(d).find("textarea").focus())});var r=!1;$("#courseDo").delegate("a[data-action]","click",function(){function c(e,t,r,i){var s={url:location.protocol+"//"+location.host+location.pathname,pic:r};n(e,t),e.addClass("bdsharebuttonbox"),e.attr("data-tag","shareMain"),window._bd_share_config={share:{tag:"shareMain",bdUrl:s.url,bdPic:s.pic,bdSign:"off",onBeforeClick:function(e,t){return e==="tsina"?t.bdText=w+"【"+i+"】#MOOC学院#（分享自 @MOOC学院）":e==="tqq"?t.bdText=w+"【"+i+"】#MOOC学院#（来自 MOOC学院）":t.bdDesc=w+"【"+i+"】#MOOC学院#（来自 MOOC学院）",t},bdSnsKey:{tsina:"2727579136",tqq:"100246400"}}},window._bd_share_main&&window._bd_share_main.init()}var e=$(this),t=e.data("operation"),i=e.data("action"),o=e.find(".courseDoNum"),u=o.text().match(/\d+/),a=o.text().search(/k/)<0?!1:!0;if(r)return;r=!0;var f='<a data-cmd="tsina" class="share-sina" href="#" title="分享到新浪微博">新浪微博</a>                                <a data-cmd="douban" class="share-db" href="#" title="分享到豆瓣">豆瓣</a>                                <a data-cmd="qzone" class="share-qzone" href="#" title="分享到QQ空间">QQ空间</a>                                <a data-cmd="weixin" class="share-wx" href="#" title="分享到微信">微信</a>                                <a data-cmd="tqq" href="#" class="share-qqmb" title="分享到腾讯微博">腾讯微博</a>',l='<div class="block">                                    <div class="block-title"></div>                                        <div class="block-content">                                            <p class="block-content-header">分享给你的朋友让大家一起来学吧！</p>                                            <div class="share-block-btns" id="shareBlockBtns">'+f+"</div>                                        </div>                                    </div>",h='<div class="block">                                    <div class="block-title"></div>                                        <div class="block-content">                                            <p class="block-content-header">学完这门课程有什么感触？来跟大家晒一下吧！</p>                                            <div>                                              <a class="block-btn-primary" target="_blank" href="../'+comment_edit_url+'">写点评</a>                                              <a class="block-btn-normal" id="commentCancel" href="javascript:void 0;">返回</a>                                            </div>                                        </div>                                    </div>';if(t=="act"){var p=a?"("+u[0]+"k)":"("+ ++u[0]+")";M[i](A[t],function(){e.after($(k[i].quit).clone(!0).find(".courseDoNum").text(p).end()).remove();if(i=="focus"&&document.body.clientWidth>768){var t=new s("","","","share");t.showCover(.8,"#f9f9f9"),t.width(560),t.height(270),t.open(l),$("#blockCover").click(function(){t.close()}),c($("#shareBlockBtns"),f,y,g)}if(i=="learn"&&document.body.clientWidth>768){var n=new s("","","","comment");n.showCover(.8,"#f9f9f9"),n.width(560),n.height(270),n.open(h),$("#blockCover").click(function(){n.close()}),$("#commentCancel").click(function(){n.close()})}r=!1})}else{var p=a?"("+u[0]+"k)":"("+ --u[0]+")";M[i](A[t],function(){e.after($(k[i].act).clone(!0).find(".courseDoNum").text(p).end()).remove(),r=!1})}})},unlogin:function(){$(".main, .top, .side, .comment_sec").delegate("a[data-operation=act], #courseDo .btn-primary, a[data-operation=support],input[data-operation=newCmt], a[data-operation=reCmt], a[data-operation=login],a[data-operation=oppose], .noteBtn, .cmtBtn, .discussBtn","click",function(e){e.preventDefault();var n=document.body.clientWidth<768?url_signin_mobile:url_signin;t.toLogin(n)}),document.body.clientWidth>768&&$("#courseGo").click(function(e){e.preventDefault(),$(this).trigger("showCourseGoOverlay")})},all:function(){function B(t,r,i,s){var o={url:location.protocol+"//"+location.host+location.pathname,pic:i};n(t,r),t.addClass("bdsharebuttonbox"),t.attr("data-tag","shareMain"),window._bd_share_config={share:{tag:"shareMain",bdUrl:o.url,bdPic:o.pic,bdSign:"off",onBeforeClick:function(e,t){return e==="tsina"?t.bdText=w+"【"+s+"】#MOOC学院#（分享自 @MOOC学院）":e==="tqq"?t.bdText=w+"【"+s+"】#MOOC学院#（来自 MOOC学院）":t.bdDesc=w+"【"+s+"】#MOOC学院#（来自 MOOC学院）",t},bdSnsKey:{tsina:"2727579136",tqq:"100246400"}}},e.loadScript("http://static.guokr.com/baidu-share/static/api/js/share.js?v=226108fe.js?cdnversion="+~(-(new Date)/36e5))}function F(e,t,n){var r=$(window).scrollTop(),i=e.offset().top;r>i-40?t.addClass(n):t.removeClass(n)}$("#courseIntro a").attr("target","_blank"),$(".slider").bxSlider({minSlides:1,maxSlides:4,slideWidth:202,slideMargin:25,hideControlOnEnd:!0,adaptiveHeight:!0,infiniteLoop:!1});var t=$("#shareIcon"),r=$("#shareWrap");document.body.clientWidth>768&&$("#courseShare").hover(function(){t.hide(),r.show()},function(){t.show(),r.hide()});var i=$("#tabs"),o=i.children("li"),u=i.siblings(".content");i.delegate("> li > a","click",function(){var e=$(this),t=o.index(e.parent("li")),n=u.eq(t),r="sticky";o.removeClass("active"),e.parent("li").addClass("active"),i.addClass(r),c(n.offset().top-i.height(),!0,function(){},1)});var a=$("#introContent"),l=a.height(),h=a.css("lineHeight").match(/\d+/),d=10*h,v=$('<a class="course-fold" href="javascript:void 0;">展开详细信息...</a>'),b=$('<a class="course-fold" href="javascript:void 0;">收起详细信息...</a>');l>d&&(a.after(b).after(v),b.hide(),a.height(d).css("overflow","hidden")),v.click(function(){$(this).hide(),b.show(),a.height("auto")}),b.click(function(){$(this).hide(),v.show(),a.height(d)});var E=$(".comment_list"),S="赞",x="取消",T=0,N,C,k,L,A=function(e){if(e.type=="mouseenter"){clearTimeout(N);var t=$(this);N=setTimeout(function(){t.parents(".cmt-zan").find(".zanList").show()},200)}else if(e.type=="mouseleave"){clearTimeout(N);var t=$(this);N=setTimeout(function(){t.parents(".cmt-zan").find(".zanList").hide()},200)}},O=function(e){var t=$(this),n=t.parents("li").attr("id"),r=t.data("operation"),i=t.data("num");r=="support"&&T==0?(T=1,M.zan(n,r,function(){i!="999+"?i++:"",t.data("operation","oppose").data("num",i),t.find(".zanNum").html(i),t.children(":first").toggleClass("icon-zan").toggleClass("icon-zaned"),t.attr("title",x),T=0})):r=="oppose"&&T==0&&(T=1,M.zan(n,r,function(){i!="999+"?i--:"",t.data("operation","support").data("num",i),t.find(".zanNum").html(i),t.children(":first").toggleClass("icon-zan").toggleClass("icon-zaned"),t.attr("title",S),T=0}))};E.delegate(".zanDo, .zanList","mouseenter mouseleave",A),E.delegate(".zanDo","click",O);var _=$("#video").children(":gt(4)");_.slideUp(),$("#videoAll a").click(function(){_.slideToggle(),$(this).siblings().addBack().toggle()}),$(".cmtRep").click(function(){var e=$(this),t=$(this).data("showed"),n=$(this).parents(".cmt_list-cmt").next();if(t==="true")n.hide(),$(this).data("showed","false");else{var r,i=n.find("textarea"),s=n.find("ul");!ukey&&i.length===1&&(i.after('<p style="margin-left:10px">尚未登录，请点击  <a href="javascript:void(0)" style="color:#0c9fdc" data-operation="login">登录</a>  后评论！<p>'),i.remove()),s.length===1?(n.show(),i.focus()):replyAction.getCmt(e),$(this).data("showed","true")}}),$(".comment_list").delegate("a[data-operation=cancelCmt]","click",function(){$(this).parents("li").find(".cmtRep").click(),$(this).parent().siblings(".gbtxt").val("")}),$(".comment_list").delegate("a[data-operation=moreCmt]","click",function(){var e=$(this);replyAction.moreCmt(e)}),$(".comment_list p").each(function(){/[\r\n\t]/.test(this.innerHTML)&&(this.innerHTML=this.innerHTML.replace(/[\r\n\t]/g,"<br />"))});var D=["图片要么已经来了，要么在来的路上","图片正在全速奔向你","你造图片加载得多努力吗！","稍等，图片马上就到"];$(".cmtCertificate").click(function(){var e=$(this),t=e.data("course"),n=e.data("ch"),r=e.attr("title"),i=e.data("src"),o=new Image,u=new s("","","","shai"),a=Math.floor(Math.random()*D.length),f='<p class="shai-block-txt">'+D[a]+'</p><span class="shai-block-img load"></span>',l,c=$("#blockWindow");u.title('<img width="48" height="48" src="../'+t+'" alt="'+r+'" /><p class="ellipsis">'+r+'</p><p class="ch ellipsis">'+n+"</p>"),u.showCover(.8,"#f9f9f9"),u.open(f),$("#blockCover").click(function(){u.close()}),o.src="",o.onload=function(){l='<img src="../'+i+'" alt="'+r+'" class="shai-block-img" />',u.open(l,null,function(){c.hide()}),setTimeout(function(){u.pos(),c.show()},200)},o.src=i});var P=$("#noteWeek");P.find("a").not(".noteBtn").click(function(e){e.preventDefault();var t=$(this),n=t.attr("href");t.closest(".tabs").find(".active").removeClass("active"),t.parent().addClass("active"),$.get(n,function(e){$("#noteListWrapper")[0].outerHTML=e})});var H='<a data-cmd="tsina" class="share-sina" href="#" title="分享到新浪微博">新浪微博</a>                        <a data-cmd="weixin" class="share-wx" href="#" title="分享到微信">微信</a>                        <a data-cmd="douban" class="share-db" href="#" title="分享到豆瓣">豆瓣</a>                        <a data-cmd="qzone" class="share-qzone" href="#" title="分享到QQ空间">QQ空间</a>';B(m,H,y,g);var j=p({appId:wxConfig.appid,timestamp:wxConfig.timestamp,nonceStr:wxConfig.nonceStr,signature:wxConfig.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]},!1);j.ready(function(){j.share({title:document.title,desc:$.trim($(".quote").text()||$("#introContent p:first-child").text()),link:location.protocol+"//"+location.host+location.pathname,imgUrl:$(".course-img img").attr("src")||$("#courseVideo .vjs-tech").attr("poster")||"http://2.im.guokr.com/hSkz3XsbpgVXe98w319kFyUexSyUP23o78x_SkLtrjagAAAAoAAAAEpQ.jpg?imageView2/1/w/160/h/160",success:function(){},cancel:function(){}})}),f(),$(window).scroll(function(){F($("#stickySpacer"),$("#tabs"),"sticky")}),F($("#stickySpacer"),$("#tabs"),"sticky")}},D=t.isLogin()?"login":"unlogin";_[D]&&_[D](ukey),_.all&&_.all()}),define("course",function(){})})();