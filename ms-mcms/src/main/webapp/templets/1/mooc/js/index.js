(function(){define("lib/cookies",{get:function(e){"use strict";if(document.cookie.length>0){var t,n=document.cookie.indexOf(e+"=");if(n!=-1)return n=n+e.length+1,t=document.cookie.indexOf(";",n),t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(n,t))}return""},set:function(e,t,n,r){"use strict";return document.cookie=e+"="+escape(t)+(n==null?"":";expires="+n.toGMTString())+";path="+(r||"/"),this},remove:function(e,t){"use strict";var n=new Date;n.setTime(n.getTime()-1);var r=this.get(e);r!=null&&(document.cookie=e+"="+r+";expires="+n.toGMTString()+";path="+(t||"/"))}}),define("lib/m",[],function(){"use strict";var e=!!document.all&&navigator.userAgent.indexOf("Opera")===-1,t=e&&!("maxHeight"in document.body.style),n=e&&"prototype"in Image,r=e&&!t&&!n,i=window,s=i.document;return{ua:{isIE:e,isIE6:t,isIE8:n,isIE7:r,isFF:!!s.getBoxObjectFor||"mozInnerScreenX"in i,isOP:!!i.opera&&!!i.opera.toString().indexOf("Opera"),isOP9:/^function \(/.test([].sort),isWK:!!i.devicePixelRatio,isSF:/a/.__proto__=="//",isCR:/s/.test(/a/.toString)},scriptOnload:function(e,t){this.ua.isIE?e.attachEvent("onreadystatechange",function(){var n=e.readyState;(n==="loaded"||n==="complete")&&t()}):(e.addEventListener("load",t,!1),e.addEventListener("error",function(){t()},!1))},loadScript:function(e,t){var n=s.createElement("script"),r=this.loadScript.head=this.loadScript.head||s.getElementsByTagName("head")[0];return this.scriptOnload(n,function(){t&&t.call(n);try{if(n.clearAttributes)n.clearAttributes();else for(var e in n)delete n[e]}catch(i){}r.removeChild(n)}),n.async=!0,n.src=e,r.insertBefore(n,r.firstChild)},isHtml:function(e){var t=/^[^<]*(<[\w\W]+>)[^>]*$/;return t.test(e)},format:function(e,t,n){if(typeof t=="string"){var r=n?t:"{v}",i=n||t;return e.replace(r,""+i)}var s=t,i;return e.replace(/\{([^{}]+)\}/g,function(e,t){return i=s[t],i!==undefined?""+i:""})}}}),define("lib/support",["lib/m"],function(e){"use strict";var t=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),n="Webkit Moz O ms Khtml".split(" "),r=document.createElement("div");return{fixed:function i(){if(typeof i.r!="undefined")return i.r;var t=!0;if(e.ua.isIpad||e.ua.isIphone)t=navigator.userAgent.match(/[5-9]_[0-9]/)!==null;else{var n=document.createElement("div"),r=document.createElement("div");n.style.position="absolute",n.style.top="200px",r.style.position="fixed",r.style.top="100px",n.appendChild(r),document.body.appendChild(n),r.getBoundingClientRect&&r.getBoundingClientRect().top==n.getBoundingClientRect().top&&(t=!1),document.body.removeChild(n),n=null,r=null}return i.r=t,t},touchEvent:function s(){if(typeof s.r!="undefined")return s.r;var e=!0,t=["touchstart","touchmove","touchend","touchcancel"];for(var n=0,i=t.length;n<i;n++){var o=t[n];o="on"+o;var u=o in r;u||(r.setAttribute(o,"return;"),u=typeof r[o]=="function");if(!u){e=!1;break}}return s.r=e,e},cssanimation:function o(){if(typeof o.r!="undefined")return o.r;var e=!1,t=r.style,i="animationName",s=i.charAt(0).toUpperCase()+i.substr(1),u=(i+" "+n.join(s+" ")+s).split(" ");for(var a in u)if(t[u[a]]!==undefined){e=!0;break}return o.r=e,e}}}),define("lib/Base",[],function(){"use strict";var e=function(){};return e.extend=function(e,t){var n=t||this;for(var r in n)n.hasOwnProperty(r)&&r!=="prototype"&&(e[r]=n[r]);for(var i in n.prototype)n.prototype.hasOwnProperty(i)&&(e.prototype[i]=n.prototype[i])},e}),define("lib/Event",["lib/Base"],function(e){"use strict";function o(){}var t=Array.prototype.slice,n=Object.prototype.toString,r=function(e){return typeof e=="object"?e===null?"null":/\[object (\w+)\]/.exec(n.call(e))[1].toLowerCase():typeof e},i=function(e,t,n){var i,s,o,u=Array.prototype.forEach;n=n||this;if(e==null)return;if(u&&e.forEach===u)e.forEach(t,n);else if(r(e)==="array")for(s=0,o=e.length;s<o;s++)t.call(n,e[s],s,e);else for(var a in e)ObjectProto.hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)},s=function(e,t,n){var i,s,o,u,a=Array.prototype.filter;n=n||this;if(e==null)return;if(a&&e.filter===a)return e.filter(t,n);if(r(e)==="array"){u=[];for(s=0,o=e.length;s<o;s++)t.call(n,e[s],s,e)&&u.push(e[s])}else{u={};for(var f in e)ObjectProto.hasOwnProperty.call(e,f)&&t.call(n,e[f],f,e)&&(u[f]=e[f])}return u};return o.prototype.on=function(e,t,n,r){return this.eventQueue=this.eventQueue||{},this.eventQueue[e]=this.eventQueue[e]||[],this.eventQueue[e].push({callback:t,context:n,once:r}),this},o.prototype.off=function(e,t){this.eventQueue=this.eventQueue||{};if(this.eventQueue[e]==null)return;return t?(this.eventQueue[e]=s(this.eventQueue[e],function(e,n){return e.callback!==t}),this.eventQueue[e].length===0&&delete this.eventQueue[e]):delete this.eventQueue[e],this},o.prototype.fire=function(e,n){this.eventQueue=this.eventQueue||{};var r=this.eventQueue[e],s=!0;if(r){var o=t.call(arguments,1);i(r,function(t){t.callback.apply(t.context,o)===!1&&(s=!1),t.once&&this.off(e,t.callback)},this)}return s},e.extend(o),o}),define("lib/Overlay",["lib/support","lib/Event","lib/m"],function(e,t,n){"use strict";function y(e){var t,n;e?(t=(u.height()-h.height())/2+(document.documentElement.scrollTop||window.pageYOffset||0),n=(u.width()-h.width())/2+(document.documentElement.scrollLeft||window.pageXOffset||0)):(t=(u.height()-h.height())/2,n=(u.width()-h.width())/2),h.css({top:t,left:n})}function b(e,t){v&&v.length&&v.css({opacity:e||.5,"background-color":t||"#000"}).show()}function w(){v&&v.length&&v.remove()}function E(){v.css({top:document.documentElement.scrollTop||window.pageYOffset||0,left:document.documentElement.scrollLeft||window.pageXOffset||0})}function S(){v.css({width:u.width(),height:u.height()})}function x(t){i=t,s='<div id="blockWindow" class="'+i+'-block">                           <div class="'+i+'-block-b">                               <h4 class="'+i+'-block-hd">                                   <span id="blockTitle"></span>                                   <a id="blockClose" class="block-close" href="#" title="关闭">X</a>                               </h4>                               <div id="blockContent" class="'+i+'-block-bd"></div>                           </div>                       </div>',h=$(s),h.appendTo("body"),p=$(a),d=$(f),g=[h,p],navigator.userAgent.match(/iPad|iPhone/i)!==null?c=navigator.userAgent.match(/[5-9]_[0-9]/)!==null:(c=e.fixed(),u.resize(function(){m&&m.pos()})),h.delegate(l,"click",function(e){e.preventDefault(),m&&m.close()})}function T(e,t,n,r){this._isOpen=!1,x.call(this,r),this._fixed=c,e&&!r&&this.open(e,t,n)}var r=0,i,s,o='<iframe src="{v}" id="blockIframe" class="block-iframe" frameborder="0" width="100%"></iframe>',u=$(window),a="#blockContent",f="#blockTitle",l="#blockClose",c,h,p,d,v,m,g;return T.prototype={openCallBack:function(e){return e&&this.on("open",e,this),this},closeCallBack:function(e){return e&&this.on("close",e,this),this},afterClose:function(e){return e&&this.on("afterClose",e,this),this},afterOpen:function(e){return e&&this.on("afterOpen",e,this),this},isOpen:function(){return this._isOpen},close:function(){return this._isOpen?this.fire("close",g)?(h.remove(),this._isOpen=!1,m=null,this.fire("afterClose",g),this):this:this},open:function(e,t,r){return this.fire("open",g)?(m&&m!==this&&m.close(),m=this,this.undelegate(),t&&this.delegate(t),e&&!n.isHtml(e)&&(e=n.format(o,e)),p.html(e||""),this._title&&d.html(this._title),this._width&&h.width(this._width),this._height&&h.height(this._height),h.css("position",!this._fixed||!c?"absolute":"fixed"),this.pos(),h.show(),this._isOpen=!0,r&&r.call(this,p),this.fire("afterOpen",g),this):this},delegate:function(e){if(!e.length){p.delegate(e.selector,e.event,e.func);return}return n.each(e,function(e){this.delegate(e.selector,e.event,e.func)},p),this},undelegate:function(){return p.undelegate(),this},pos:function(){return y(!this._fixed||!c),this},title:function(e){return this._title=e,this._isOpen&&d.html(e),this},width:function(e){return this._width=e,this._isOpen&&(h.width(e),this.pos()),this},height:function(e){return this._height=e,this._isOpen&&(h.height(e),this.pos()),this},pin:function(){if(this._fixed||!c)return;return this._fixed=!0,this._isOpen&&(h.css("position","fixed"),this.pos()),this},unpin:function(){if(!this._fixed)return;return this._fixed=!1,this._isOpen&&(h.css("position","absolute"),this.pos()),this},showCover:function(e,t){v=$('<div id="blockCover" style="position:fixed;top:0;left:0;right:0;bottom:0;display:none;z-index:'+((parseInt(h.css("z-index"),10)||0)-1)+';"></div>').appendTo("body");var n=this;return this.on("afterClose",function(){w()}).on("afterOpen",function(){b(n._coverOpacity,n._coverColor)}),typeof e=="string"&&(t=e,e=null),e&&(this._coverOpacity=e),t&&(this._coverColor=t),b(e||this._coverOpacity,t||this._coverColor),this},hideCover:function(){return w(),this}},t.extend(T),T}),define("lib/JSON2",function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}window.JSON||(window.JSON={}),typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()),define("lib/JSON2",function(){}),define("lib/store",["lib/JSON2"],function(){function e(){var e="test",t=window.localStorage;try{return t.setItem(e,"1"),t.removeItem(e),"localStorage"in window}catch(n){return!1}}var t=e(),n={set:function(){},get:function(){},remove:function(){},clear:function(){},isSupport:!1};if(t){var r=window.localStorage,i=function(e,t){var n=r[e];return function(i){setTimeout(function(){i=i||window.storageEvent;var s=i.key,o=i.newValue;if(!s){var u=r[e];u!=n&&(s=e,o=u)}s==e&&(t&&t(o==null?null:JSON.parse(o)),n=o)},0)}};n.set=function(e,t){r.setItem(e,JSON.stringify(t))},n.get=function(e){var t=r.getItem(e),i=t==null?null:JSON.parse(t);return i!==null&&i.date&&i.expiredDate&&n._expired(e,i.expiredDate,i.date)&&(i=null),i},n.remove=function(e){r.removeItem(e)},n.clear=function(){r.clear()},n.onStorage=function(e,t){window.addEventListener?window.addEventListener("storage",i(e,t),!1):document.attachEvent("storage",i(e,t))},n._expired=function(e,t,r){return(new Date).getTime()-r>=t*864e5?(n.remove(e),!0):!1},n.isSupport=!0}else/MSIE ([^;]+)/.test(navigator.userAgent)&&(n={o:null,defExps:365,init:function(){if(!n.o)try{n.o=document.createElement("input"),n.o.type="hidden",n.o.addBehavior("#default#userData"),document.body.appendChild(n.o)}catch(e){return!1}return!0},set:function(e,t,r){if(n.init()){var i=n.o;i.load(e),t&&i.setAttribute("code",JSON.stringify(t));var s=new Date,r=r?r:n.defExps;s.setDate(s.getDate()+r),i.expires=s.toUTCString(),i.save(e)}},get:function(e){if(n.init()){var t=n.o;return t.load(e),typeof t.getAttribute("code")=="undefined"?null:JSON.parse(t.getAttribute("code"))}},onStorage:function(){},remove:function(e){n.set(e,!1,-365)},isSupport:!0});return n}),define("lib/user",["lib/store"],function(e){function n(n,i){if(!window.ukey)return n(null);var s=r();!s||window.ukey!=s.ukey?$.getJSON("/_csi/user/info.json").done(function(r){r.ok&&(e.isSupport&&e.set(t,r.result),n(r.result))}).fail(function(){i&i()}):n(s)}function r(){e.get(t)}function i(){e.remove(t)}var t="CURRENT_USER_CACHE_KEY";return{getCurrent:n,getUserCache:r,clearUserCache:i,isLogin:function(){return typeof ukey=="undefined"&&(ukey=!1),ukey?!0:!1},toLogin:function(e){document.location.href=e}}}),define("lib/tmpl",[],function(){function e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var t={entities:e};return function(n,r){/\W/.test(n)||(n=document.getElementById(n).innerHTML);var i=new Function("funcs, obj","var p=[],print=function(){p.push.apply(p,arguments);};with(funcs){with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',entities($1),'").replace(/\t:=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}}return p.join('');");return r?i(t,r):function(e){return i(t,e)}}}),define("lib/accessToken",["lib/cookies"],function(e){"use strict";var t,n=window.location.host,r=window.url_re_signin||"",i=window.client_id||32353;return t=e.get("_"+i+"_access_token"),{checkToken:function(){return typeof t=="string"?!0:!1},getToken:function(){return t}}}),define("academyApi",["lib/accessToken"],function(e){function i(e,t,n,i,s){var o=s===0?"discussion_id":"id";data={opinion:t,access_token:r},data[o]=e,$.ajax({url:i,data:data,type:"POST",success:function(e){e.ok&&n&&n()},dataType:"json"})}function s(e,r,s){return i(e,r,s,t.community_post_recommend,n.community)}function o(e,r,s){return i(e,r,s,t.course_post_recommend,n.course)}function u(e,t,n,i){var s=i===0?"discussion_id":"id";data={access_token:r},data[s]=e;var o=$.param(data);$.ajax({url:n+"?"+o,type:"DELETE",success:function(e){e.ok&&t&&t()},dataType:"json"})}function a(e,r){return u(e,r,t.community_post_reply,n.community)}function f(e,r){return u(e,r,t.course_post_reply,n.course)}function l(e,t,n,i){var s=i===0?"discussion_id":"id";data={access_token:r},data[s]=e;var o=$.param(data);$.ajax({url:n+"?"+o,type:"DELETE",success:function(e){e.ok&&t&&t()},dataType:"json"})}function c(e,r){return l(e,r,t.community_post,n.community)}function h(e,r){return l(e,r,t.course_post,n.course)}function p(e,t,n,i,s,o){var u=o===0?"discussion_id":"id";data={action:t,opinion:n,access_token:r},data[u]=e,$.ajax({url:s,data:data,type:"PUT",success:function(e){e.ok&&i&&i()},dataType:"json"})}function d(e,r,i,s){return p(e,r,i,s,t.community_post,n.community)}function v(e,r,i,s){return p(e,r,i,s,t.course_post,n.course)}var t={cmtCmt:"/apis/academy/review_reply.json",community_post_recommend:"/apis/academy/post_recommend.json",course_post_recommend:"/apis/academy/discussion_recommend.json",community_post_reply:"/apis/academy/post_reply.json",course_post_reply:"/apis/academy/discussion_reply.json",community_post:"/apis/academy/post.json",course_post:"/apis/academy/discussion.json"},n={course:0,community:1},r=e.getToken();return{editBlackboard:function(e,t){$.ajax({url:"/apis/academy/post_intro.json",data:{introduction:e,access_token:r},type:"PUT",success:function(e){e.ok&&t&&t()},dataType:"json"})},zanCommunityPost:s,zanCoursePost:o,deleteCommunityPost:c,deleteCoursePost:h,deleteCommunityPostCmt:a,deleteCoursePostCmt:f,doCommunityPost:d,doCoursePost:v,doPostClass:function(e,t,n){$.ajax({url:"/apis/academy/post_class.json",data:{class_id:t,post_id:e,access_token:r},type:"PUT",success:function(e){e.ok&&n&&n()},dataType:"json"})},getSimilarCourse:function(e,t){return e.length>100?!1:$.ajax({url:"/apis/academy/course_name.json",data:{name:e,limit:5,access_token:r},success:function(e){if(e.ok){var n=0,r=[];for(;n<e.result.length;n++)r.push({name:e.result[n].name,cname:e.result[n].cname,id:e.result[n].id});t(r)}},type:"get",dataType:"json",global:!1})},postCmtCmt:function(e,n,i){if(n.length>300){alert("评论字数不能超过300哦～");return}$.ajax({url:t.cmtCmt,data:{review_id:e,content:n,access_token:r},type:"POST",success:function(e){e.ok&&i&&i(e)},dataType:"json"})},getCmtCmt:function(e,n,i,s){$.ajax({url:t.cmtCmt+"?random="+Math.random(),data:{id:e,offset:n,limit:i,access_token:r},type:"GET",success:function(e){e.ok&&s&&s(e)},dataType:"json"})},delCmtCmt:function(e,n){var i=$.param({id:e,access_token:r});$.ajax({url:t.cmtCmt+"?"+i,type:"DELETE",success:function(e){e.ok&&n&&n(e)},dataType:"json"})}}}),define("lib/comment",["lib/Overlay","lib/user","lib/tmpl","academyApi","lib/accessToken"],function(e,t,n,r,i){function f(e,t){var n=Date.fromString(e),r=Date.fromString(t),i=n.getTime()-r.getTime(),s=864e5,o=36e5,u=6e4,a=1e3,f="";return Math.floor(i/a)<=0?f="刚刚":i<u?f=Math.floor(i/a)+"秒前":i<o?f=Math.floor(i/u)+"分钟前":i<o*3?f=Math.floor(i/o)+"小时前":i<s&&r.getDate()==n.getDate()?(f="今天 ",f+=r.getHours()>9?r.getHours():"0"+r.getHours(),f+=":",f+=r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes()):(f=r.getFullYear(),f+="-",f+=r.getMonth()>8?r.getMonth()+1:"0"+(r.getMonth()+1),f+="-",f+=r.getDate()>9?r.getDate():"0"+r.getDate(),f+=" ",f+=r.getHours()>9?r.getHours():"0"+r.getHours(),f+=":",f+=r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes()),f}var s=".cmt_list-rep",o=i.getToken(),u={postCmt:function(e){function i(t){var n=e.parent(),r=e.parents("li").find(".cmtNum");n.siblings(".gbtxt").val(""),r.text(+r.text()+1);var i=t.result,s=n.siblings("ul"),o='<li>                                    <a href="'+i.user_url+'" target="_blank">'+i.nickname+"</a>："+i.content+'&nbsp;-&nbsp; 刚刚 &nbsp;&nbsp;<a href="javascript: void 0" data-operation="delCmt" data-id="'+i.id+'">删除</a>&nbsp;&nbsp;<a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>';if(s.length===0){var u=document.createElement("ul");u.className="cmts-list",u.innerHTML=o,n.parent()[0].appendChild(u)}else s.prepend($(o))}var t=e.data("id"),n=e.parent().siblings(".gbtxt").val();if(n===""){alert("评论不能为空哦～");return}r.postCmtCmt(t,n,i)},getCmt:function(e){function a(e){if(e.result.length===0){u.show(),u.find("textarea").focus();return}var t=document.createElement("ul"),r=e.now,s=e.result,a=s[0].review_id,l='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%>&nbsp;-&nbsp; <%=date%> &nbsp;&nbsp;<a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',c='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%>&nbsp;-&nbsp; <%=date%> &nbsp;&nbsp;<a href="javascript: void 0" data-operation="delCmt" data-id="<%=id%>">删除</a>&nbsp;&nbsp;<a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',h='<li class="cmts-more-li"><a href="javascript: void 0" data-question="0" data-id="<%=review_id%>" data-total="<%=total%>" class="cmts-mort" data-operation="moreCmt">展开更多</a></li>',p="";t.className="cmts-list",$.each(s,function(e,t){var i=t.user_url,s=t.nickname,o=t.content,u=t.id,a=f(r,t.date_created);ukey===t.ukey_author?p+=n(c,{url:i,nickname:s,content:o,date:a,id:u}):p+=n(l,{url:i,nickname:s,content:o,date:a})}),i>o&&(p+=n(h,{review_id:a,total:i})),t.innerHTML=p,u[0].appendChild(t),u.show(),u.find("textarea").focus()}var t=e.data("id"),i=e.data("num"),s=0,o=20,u=e.parents(".cmt_list-cmt").next();r.getCmtCmt(t,s,o,a)},moreCmt:function(e){function u(t){var r=e.parent().parent(),i=t.now,s=t.result,o='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%>&nbsp;-&nbsp; <%=date%> &nbsp;&nbsp;<a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',u='<li>                                    <a href="<%=url%>" target="_blank"><%=nickname%></a>：<%:=content%>&nbsp;-&nbsp; <%=date%> &nbsp;&nbsp;<a href="javascript: void 0" data-operation="delCmt" data-id="<%=id%>">删除</a>&nbsp;&nbsp;<a href="javascript: void 0" data-operation="reCmt">回复</a>                                </li>',a="";e.parent().remove(),$.each(s,function(e,t){var r=t.user_url,s=t.nickname,l=t.content,c=t.id,h=f(i,t.date_created);ukey===t.ukey_author?a+=n(u,{url:r,nickname:s,content:l,date:h,id:c}):a+=n(o,{url:r,nickname:s,content:l,date:h})}),r.append($(a))}var t=e.data("id"),i=e.parent().siblings("li").length,s=+e.data("total")-20,o=e.parents(".cmt_list-cmt").next();r.getCmtCmt(t,i,s,u)},delCmt:function(e){function n(){var t=e.parents(".cmt_list-rep").siblings("cmt_list-cmt").find(".cmtNum");t.text(+t.text()-1),e.parent().remove()}var t=e.data("id");r.delCmtCmt(t,n)},reCmt:function(e){if(ukey){var t=e.closest(s),n=$("textarea",t),r="",i=n.val().trim(),o="：",u=i.split(o),a="回复@",f;$.each(e.siblings("a"),function(e,t){f=$.trim($(t).text());if(!/^@/.test(f))return r=f,!1}),a+=r,u.length>1&&/^回复/.test(u)?(u[0]=a,a=u.join(o)):a=a+o+i,n.val(a)}}},a={zan:function(e,t,n){$.ajax({url:"/apis/academy/review_helpful.json",data:{id:e,opinion:t,access_token:o},type:"POST",success:function(e){e.ok&&n&&n()},dataType:"json"})},deleteID:function(e,t){var n=$.param({id:e,access_token:o});$.ajax({url:"/apis/academy/review.json?"+n,type:"DELETE",success:function(e){e.ok&&t&&t()},dataType:"json"})}};(function(){var e=window.Date,t=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,}))?(Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/,n,r,i;if(e.parse("2011-11-29T15:52:30.5")!==1322599950500||e.parse("2011-11-29T15:52:30.52")!==1322599950520||e.parse("2011-11-29T15:52:18.867")!==1322599938867||e.parse("2011-11-29T15:52:18.867Z")!==1322581938867||e.parse("2011-11-29T15:52:18.867-03:30")!==1322594538867||e.parse("2011-11-29")!==13225248e5||e.parse("2011-11")!==13201056e5||e.parse("2011")!==129384e7)e.__parse=e.parse,n=-(new Date).getTimezoneOffset(),r=Math.floor(n/60),i=n%60,e.parse=function(n){var s=t.exec(n);return s?Date.UTC(s[1],(s[2]||1)-1,s[3]||1,s[4]-(s[8]?s[9]?s[9]+s[10]:0:r)||0,s[5]-(s[8]?s[9]?s[9]+s[11]:0:i)||0,s[6]||0,((s[7]||0)+"00").substr(0,3)):e.__parse.apply(this,arguments)};e.__fromString=e.fromString,e.fromString=function(n){return!e.__fromString||t.test(n)?new e(e.parse(n)):e.__fromString.apply(this,arguments)}})();var l={login:function(){var e=$(".comment_list");e.delegate(".cmtDel","click",function(e){var t=$(this),n=t.parents("li"),r=n.attr("id");confirm("确认删除点评？")&&a.deleteID(r,function(){n.slideUp()})}),e.delegate("input[data-operation=newCmt]","click",function(){var e=$(this);u.postCmt(e)}),e.delegate("a[data-operation]","click",function(){var e=$(this),t=e.data("operation");t==="delCmt"?u.delCmt(e):t==="reCmt"&&(u.reCmt(e),e.parents(s).find("textarea").focus())})},unlogin:function(){$(".main").delegate(" .title-b .btn-primary, a[data-operation=support],input[data-operation=newCmt], a[data-operation=reCmt], a[data-operation=login], .comment_box #cmtBtn","click",function(e){e.preventDefault();var n=document.body.clientWidth<768?url_signin_mobile:url_signin;t.toLogin(n)})},all:function(){$(".cmt_list-cmt .cmt-content").each(function(){/[\r\n\t]/.test(this.innerHTML)&&(this.innerHTML=this.innerHTML.replace(/[\r\n\t]/g,"<br />"))});var t=$(".comment_list"),n="赞",r="取消",i,s,o,f,l=function(e){var t=$(this),i=t.parents("li").attr("id"),s=t.data("operation"),o=t.data("num");s=="support"?a.zan(i,s,function(){o!="999+"?o++:"",t.data("operation","oppose").data("num",o),t.find(".zanNum").html(o),t.children(":first").toggleClass("icon-zan").toggleClass("icon-zaned"),t.attr("title",r)}):s=="oppose"&&a.zan(i,s,function(){o!="999+"?o--:"",t.data("operation","support").data("num",o),t.find(".zanNum").html(o),t.children(":first").toggleClass("icon-zan").toggleClass("icon-zaned"),t.attr("title",n)})},c=function(e){if(e.type=="mouseenter"){clearTimeout(i);var t=$(this);i=setTimeout(function(){t.parent().find(".zanList").show()},200)}else if(e.type=="mouseleave"){clearTimeout(i);var t=$(this);i=setTimeout(function(){t.parent().find(".zanList").hide()},200)}};t.delegate(".zanDo","click",l),t.delegate(".zanDo, .zanList","mouseenter mouseleave",c),$(".cmtRep").click(function(){var e=$(this),t=$(this).data("showed"),n=$(this).parents(".cmt_list-cmt").next();if(t==="true")n.hide(),$(this).data("showed","false");else{var r,i=n.find("textarea"),s=n.find("ul");!ukey&&i.length===1&&(i.after('<p style="margin-left:10px">尚未登录，请点击&nbsp;&nbsp;<a href="javascript:void(0)" style="color:#0c9fdc" data-operation="login">登录</a>&nbsp;&nbsp;后评论！<p>'),i.remove()),s.length===1?(n.show(),i.focus()):u.getCmt(e),$(this).data("showed","true")}}),$(".comment_list").delegate("a[data-operation=cancelCmt]","click",function(){$(this).parents("li").find(".cmtRep").click(),$(this).parent().siblings(".gbtxt").val("")}),$(".comment_list").delegate("a[data-operation=moreCmt]","click",function(){var e=$(this);u.moreCmt(e)});var h=["图片要么已经来了，要么在来的路上","图片正在全速奔向你","你造图片加载得多努力吗！","稍等，图片马上就到"];$(".cmtCertificate").click(function(){var t=$(this),n=t.data("course"),r=t.data("ch"),i=t.attr("title"),s=t.data("src"),o=new Image,u=new e("","","","shai"),a=Math.floor(Math.random()*h.length),f='<p class="shai-block-txt">'+h[a]+'</p><span class="shai-block-img load"></span>',l,c=$("#blockWindow");u.title('<img width="48" height="48" src="'+n+'" alt="'+i+'" /><p class="ellipsis">'+i+'</p><p class="ch ellipsis">'+r+"</p>"),u.showCover(.8,"#f9f9f9"),u.open(f),$("#blockCover").click(function(){u.close()}),o.src="",o.onload=function(){l='<img src="'+s+'" alt="'+i+'" class="shai-block-img" />',u.open(l,null,function(){c.hide()}),setTimeout(function(){u.pos(),c.show()},200)},o.src=s})}},c=t.isLogin()?"login":"unlogin";l[c]&&l[c](ukey),l.all&&l.all()}),define("lib/jquery/easing",[],function(){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}})}),define("lib/scrollTo",["lib/jquery/easing"],function(e){"use strict";function n(e){var t=window.scrollX||window.pageXOffset||document.documentElement.scrollLeft,n=window.scrollY||window.pageYOffset||document.documentElement.scrollTop,r=n+(window.innerHeight||document.documentElement.clientHeight),i=t+(window.innerWidth||document.documentElement.clientWidth),s=e.scrollLeft,o=e.scrollTop,u=s+(e.width||0),a=o+(e.height||0),f=!1,l=!1;if(s!=null&&s<t||u>i)f=!0;if(o!=null&&o<n||a>r)l=!0;return f&&l?3:l?2:f?1:0}var t=$("html,body");return function(e,r,i,s,o){function p(){t.animate(f,c||1e3,"easeInOutCirc",i?function e(){e.exed&&i(),e.exed=!0}:null)}var u=typeof e=="number",a=u?{top:e,left:e}:e.offset?e.offset():e,f={},l,c,h;typeof s=="number"?(c=s,h=typeof o=="string"?o:"top"):typeof s=="string"?(c=1e3,h=s):(c=1e3,h=u?"top":"all");switch(h){case"all":f.scrollTop=a.top,f.scrollLeft=a.left;break;case"top":f.scrollTop=a.top;break;case"left":f.scrollLeft=a.left;break;default:return}e.jquery&&(f.width=e.width(),f.height=e.height()),l=n(f),e.jquery&&(delete f.width,delete f.height);if(r)return p(),!0;switch(l){case 0:return i&&i(),!1;case 1:return delete f.scrollTop,p(),!0;case 2:return delete f.scrollLeft,p(),!0;case 3:return p(),!0;default:}}}),define("lib/screenTop",["lib/support","lib/scrollTo"],function(e,t){"use strict";function a(){var t=s.height();if(o>t*1){e.fixed()||n.css("top",o+t-u);if(i)return;r||(n.appendTo("body"),u+=n.outerHeight(),r=!0),n.show(),i=!0}else i&&(n.hide(),i=!1)}var n=$('<a class="screen-top" href="#"><s></s><b></b>返回顶部</a>'),r=!1,i=!1,s=$(window),o,u;return e.fixed()||n.css("bottom","auto"),function(r){e.fixed()||(u=r||80),s.scroll(function(){o=s.scrollTop(),setTimeout(a)}),o=s.scrollTop(),n.click(function(e){e.preventDefault(),t(0)}),a()}}),define("lib/homeSlide",[],function(){"use strict";function r(e,t,n,r){if($.isArray(n))for(var i=0,s=n.length;i<s;i++)n[i].hide(),n[i].eq(e).show();else n.hide(),n.eq(e).show();r.removeClass(t),r.eq(e).addClass(t)}var e="current",t=$("#leftArrow"),n=$("#rightArrow");return function(i,s,o,u,a){function v(t){a&&a.showEffect?a.showEffect(t,e,i,h):r(t,e,i,h)}function m(){c=0}function g(){c=1}function y(){l!==-1&&(d=setInterval(function(){c&&(f++,f%=p,v(f))},l))}var f=o||0,l=u||5e3,c=1,i=i,h=s,p=h.length,d;v(f),y();if($.isArray(i))for(var b=0,w=i.length;b<w;b++)i[b].hover(m,g);else i.hover(m,g);return h.click(function(){m(),clearInterval(d),f=h.index(this),v(f),g(),y()}),t.click(function(e){m(),clearInterval(d),f=--f%p,v(f),g(),y()}),n.click(function(e){m(),clearInterval(d),f=++f%p,v(f),g(),y()}),{show:function(){return v(),this},stop:function(){return m(),this},start:function(){return g(),this}}}}),function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};e.fn.bxSlider=function(r){if(this.length==0)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(r)}),this;var s={},o=this;t.el=this;var u=e(window).width(),a=e(window).height(),f=function(){s.settings=e.extend({},n,r),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp=s.settings.mode=="vertical"?"top":"left",s.usingCSS=s.settings.useCSS&&s.settings.mode!="fade"&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(e.style[t[n]]!==undefined)return s.cssPrefix=t[n].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),s.settings.mode=="vertical"&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),l()},l=function(){o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:s.settings.mode=="horizontal"?s.children.length*100+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing");var t=m();s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:d()}),s.settings.pager||s.viewport.parent().css({margin:"0 auto 0px"}),s.children.css({"float":s.settings.mode=="horizontal"?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",v()),s.settings.mode=="horizontal"&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),s.settings.mode=="vertical"&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),s.settings.mode=="fade"&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&N(),s.active.last=s.settings.startSlide==g()-1,s.settings.video&&o.fitVids();var n=s.children.eq(s.settings.startSlide);s.settings.preloadImages=="all"&&(n=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.pager&&S(),s.settings.controls&&x(),s.settings.auto&&s.settings.autoControls&&T(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),c(n,h)},c=function(t,n){var r=t.find("img, iframe").length;if(r==0){n();return}var i=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++i==r&&n()}).each(function(){this.complete&&e(this).load()})})},h=function(){if(s.settings.infiniteLoop&&s.settings.mode!="fade"&&!s.settings.ticker){var t=s.settings.mode=="vertical"?s.settings.minSlides:s.settings.maxSlides,n=s.children.slice(0,t).clone().addClass("bx-clone"),r=s.children.slice(-t).clone().addClass("bx-clone");o.append(n).prepend(r)}s.loader.remove(),b(),s.settings.mode=="vertical"&&(s.settings.adaptiveHeight=!0),s.viewport.height(p()),o.redrawSlider(),s.settings.onSliderLoad(s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",U),s.settings.auto&&s.settings.autoStart&&(g()>1||s.settings.autoSlideForOnePage)&&H(),s.settings.ticker&&B(),s.settings.pager&&M(s.settings.startSlide),s.settings.controls&&P(),s.settings.touchEnabled&&!s.settings.ticker&&F()},p=function(){var t=0,n=e();if(s.settings.mode!="vertical"&&!s.settings.adaptiveHeight)n=s.children;else if(!s.carousel)n=s.children.eq(s.active.index);else{var r=s.settings.moveSlides==1?s.active.index:s.active.index*y();n=s.children.eq(r);for(i=1;i<=s.settings.maxSlides-1;i++)r+i>=s.children.length?n=n.add(s.children.eq(i-1)):n=n.add(s.children.eq(r+i))}return s.settings.mode=="vertical"?(n.each(function(n){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),s.viewport.css("box-sizing")=="border-box"?t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):s.viewport.css("box-sizing")=="padding-box"&&(t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),t},d=function(){var e="100%";return s.settings.slideWidth>0&&(s.settings.mode=="horizontal"?e=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:e=s.settings.slideWidth),e},v=function(){var e=s.settings.slideWidth,t=s.viewport.width();return s.settings.slideWidth==0||s.settings.slideWidth>t&&!s.carousel||s.settings.mode=="vertical"?e=t:s.settings.maxSlides>1&&s.settings.mode=="horizontal"&&(t>s.maxThreshold||t<s.minThreshold&&(e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides)),e},m=function(){var e=1;if(s.settings.mode=="horizontal"&&s.settings.slideWidth>0)if(s.viewport.width()<s.minThreshold)e=s.settings.minSlides;else if(s.viewport.width()>s.maxThreshold)e=s.settings.maxSlides;else{var t=s.children.first().width()+s.settings.slideMargin;e=Math.floor((s.viewport.width()+s.settings.slideMargin)/t)}else s.settings.mode=="vertical"&&(e=s.settings.minSlides);return e},g=function(){var e=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=Math.ceil(s.children.length/y());else{var t=0,n=0;while(t<s.children.length)++e,t=n+m(),n+=s.settings.moveSlides<=m()?s.settings.moveSlides:m()}else e=Math.ceil(s.children.length/m());return e},y=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=m()?s.settings.moveSlides:m()},b=function(){if(s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop){if(s.settings.mode=="horizontal"){var e=s.children.last(),t=e.position();w(-(t.left-(s.viewport.width()-e.outerWidth())),"reset",0)}else if(s.settings.mode=="vertical"){var n=s.children.length-s.settings.minSlides,t=s.children.eq(n).position();w(-t.top,"reset",0)}}else{var t=s.children.eq(s.active.index*y()).position();s.active.index==g()-1&&(s.active.last=!0),t!=undefined&&(s.settings.mode=="horizontal"?w(-t.left,"reset",0):s.settings.mode=="vertical"&&w(-t.top,"reset",0))}},w=function(e,t,n,r){if(s.usingCSS){var i=s.settings.mode=="vertical"?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),t=="slide"?(o.css(s.animProp,i),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),_()})):t=="reset"?o.css(s.animProp,i):t=="ticker"&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,i),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),w(r.resetValue,"reset",0),j()}))}else{var u={};u[s.animProp]=e,t=="slide"?o.animate(u,n,s.settings.easing,function(){_()}):t=="reset"?o.css(s.animProp,e):t=="ticker"&&o.animate(u,speed,"linear",function(){w(r.resetValue,"reset",0),j()})}},E=function(){var t="",n=g();for(var r=0;r<n;r++){var i="";s.settings.buildPager&&e.isFunction(s.settings.buildPager)?(i=s.settings.buildPager(r),s.pagerEl.addClass("bx-custom-pager")):(i=r+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+r+'" class="bx-pager-link">'+i+"</a></div>"}s.pagerEl.html(t)},S=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),E()),s.pagerEl.on("click","a",O)},x=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click",C),s.controls.prev.bind("click",k),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),!s.settings.nextSelector&&!s.settings.prevSelector&&(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},T=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",L),s.controls.autoEl.on("click",".bx-stop",A),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),D(s.settings.autoStart?"stop":"start")},N=function(){s.children.each(function(t){var n=e(this).find("img:first").attr("title");n!=undefined&&(""+n).length&&e(this).append('<div class="bx-caption"><span>'+n+"</span></div>")})},C=function(e){s.settings.auto&&o.stopAuto(),o.goToNextSlide(),e.preventDefault()},k=function(e){s.settings.auto&&o.stopAuto(),o.goToPrevSlide(),e.preventDefault()},L=function(e){o.startAuto(),e.preventDefault()},A=function(e){o.stopAuto(),e.preventDefault()},O=function(t){s.settings.auto&&o.stopAuto();var n=e(t.currentTarget);if(n.attr("data-slide-index")!==undefined){var r=parseInt(n.attr("data-slide-index"));r!=s.active.index&&o.goToSlide(r),t.preventDefault()}},M=function(t){var n=s.children.length;if(s.settings.pagerType=="short"){s.settings.maxSlides>1&&(n=Math.ceil(s.children.length/s.settings.maxSlides)),s.pagerEl.html(t+1+s.settings.pagerShortSeparator+n);return}s.pagerEl.find("a").removeClass("active"),s.pagerEl.each(function(n,r){e(r).find("a").eq(t).addClass("active")})},_=function(){if(s.settings.infiniteLoop){var e="";s.active.index==0?e=s.children.eq(0).position():s.active.index==g()-1&&s.carousel?e=s.children.eq((g()-1)*y()).position():s.active.index==s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&(s.settings.mode=="horizontal"?w(-e.left,"reset",0):s.settings.mode=="vertical"&&w(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter(s.children.eq(s.active.index),s.oldIndex,s.active.index)},D=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},P=function(){g()==1?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(s.active.index==0?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index==g()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},H=function(){if(s.settings.autoDelay>0)var e=setTimeout(o.startAuto,s.settings.autoDelay);else o.startAuto();s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},B=function(){var t=0;if(s.settings.autoDirection=="next")o.append(s.children.clone().addClass("bx-clone"));else{o.prepend(s.children.clone().addClass("bx-clone"));var n=s.children.first().position();t=s.settings.mode=="horizontal"?-n.left:-n.top}w(t,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&!s.usingCSS&&s.viewport.hover(function(){o.stop()},function(){var t=0;s.children.each(function(n){t+=s.settings.mode=="horizontal"?e(this).outerWidth(!0):e(this).outerHeight(!0)});var n=s.settings.speed/t,r=s.settings.mode=="horizontal"?"left":"top",i=n*(t-Math.abs(parseInt(o.css(r))));j(i)}),j()},j=function(e){speed=e?e:s.settings.speed;var t={left:0,top:0},n={left:0,top:0};s.settings.autoDirection=="next"?t=o.find(".bx-clone").first().position():n=s.children.first().position();var r=s.settings.mode=="horizontal"?-t.left:-t.top,i=s.settings.mode=="horizontal"?-n.left:-n.top,u={resetValue:i};w(r,"ticker",speed,u)},F=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart",I)},I=function(e){if(s.working)e.preventDefault();else{s.touch.originalPos=o.position();var t=e.originalEvent;s.touch.start.x=t.changedTouches[0].pageX,s.touch.start.y=t.changedTouches[0].pageY,s.viewport.bind("touchmove",q),s.viewport.bind("touchend",R)}},q=function(e){var t=e.originalEvent,n=Math.abs(t.changedTouches[0].pageX-s.touch.start.x),r=Math.abs(t.changedTouches[0].pageY-s.touch.start.y);n*3>r&&s.settings.preventDefaultSwipeX?e.preventDefault():r*3>n&&s.settings.preventDefaultSwipeY&&e.preventDefault();if(s.settings.mode!="fade"&&s.settings.oneToOneTouch){var i=0;if(s.settings.mode=="horizontal"){var o=t.changedTouches[0].pageX-s.touch.start.x;i=s.touch.originalPos.left+o}else{var o=t.changedTouches[0].pageY-s.touch.start.y;i=s.touch.originalPos.top+o}w(i,"reset",0)}},R=function(e){s.viewport.unbind("touchmove",q);var t=e.originalEvent,n=0;s.touch.end.x=t.changedTouches[0].pageX,s.touch.end.y=t.changedTouches[0].pageY;if(s.settings.mode=="fade"){var r=Math.abs(s.touch.start.x-s.touch.end.x);r>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())}else{var r=0;s.settings.mode=="horizontal"?(r=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(r=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(s.active.index==0&&r>0||s.active.last&&r<0)?w(n,"reset",200):Math.abs(r)>=s.settings.swipeThreshold?(r<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):w(n,"reset",200)}s.viewport.unbind("touchend",R)},U=function(t){if(!s.initialized)return;var n=e(window).width(),r=e(window).height();if(u!=n||a!=r)u=n,a=r,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index)};return o.goToSlide=function(t,n){if(s.working||s.active.index==t)return;s.working=!0,s.oldIndex=s.active.index,t<0?s.active.index=g()-1:t>=g()?s.active.index=0:s.active.index=t,s.settings.onSlideBefore(s.children.eq(s.active.index),s.oldIndex,s.active.index),n=="next"?s.settings.onSlideNext(s.children.eq(s.active.index),s.oldIndex,s.active.index):n=="prev"&&s.settings.onSlidePrev(s.children.eq(s.active.index),s.oldIndex,s.active.index),s.active.last=s.active.index>=g()-1,s.settings.pager&&M(s.active.index),s.settings.controls&&P();if(s.settings.mode=="fade")s.settings.adaptiveHeight&&s.viewport.height()!=p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),_()});else{s.settings.adaptiveHeight&&s.viewport.height()!=p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed);var r=0,i={left:0,top:0};if(!s.settings.infiniteLoop&&s.carousel&&s.active.last)if(s.settings.mode=="horizontal"){var u=s.children.eq(s.children.length-1);i=u.position(),r=s.viewport.width()-u.outerWidth()}else{var a=s.children.length-s.settings.minSlides;i=s.children.eq(a).position()}else if(s.carousel&&s.active.last&&n=="prev"){var f=s.settings.moveSlides==1?s.settings.maxSlides-y():(g()-1)*y()-(s.children.length-s.settings.maxSlides),u=o.children(".bx-clone").eq(f);i=u.position()}else if(n=="next"&&s.active.index==0)i=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1;else if(t>=0){var l=t*y();i=s.children.eq(l).position()}if("undefined"!=typeof i){var c=s.settings.mode=="horizontal"?-(i.left-r):-i.top;w(c,"slide",s.settings.speed)}}},o.goToNextSlide=function(){if(!s.settings.infiniteLoop&&s.active.last)return;var e=parseInt(s.active.index)+1;o.goToSlide(e,"next")},o.goToPrevSlide=function(){if(!s.settings.infiniteLoop&&s.active.index==0)return;var e=parseInt(s.active.index)-1;o.goToSlide(e,"prev")},o.startAuto=function(e){if(s.interval)return;s.interval=setInterval(function(){s.settings.autoDirection=="next"?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&e!=1&&D("stop")},o.stopAuto=function(e){if(!s.interval)return;clearInterval(s.interval),s.interval=null,s.settings.autoControls&&e!=1&&D("start")},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideCount=function(){return s.children.length},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).width(v()),s.viewport.css("height",p()),s.settings.ticker||b(),s.active.last&&(s.active.index=g()-1),s.active.index>=g()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(E(),M(s.active.index))},o.destroySlider=function(){if(!s.initialized)return;s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){e(this).data("origStyle")!=undefined?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),e(this).data("origStyle")!=undefined?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",U)},o.reloadSlider=function(e){e!=undefined&&(r=e),o.destroySlider(),f()},f(),this}}(jQuery),define("lib/jquery/bxslider",function(){}),require(["lib/cookies","lib/Overlay","lib/comment","lib/screenTop","lib/homeSlide","lib/jquery/bxslider"],function(e,t,n,r,i,s){"use strict";function f(){o==5?o=1:o++,$("[data-control="+o+"]").addClass("control-active").siblings().removeClass("control-active"),$("[data-cctitle="+o+"]").addClass("visible-title").siblings().removeClass("visible-title"),$("[data-carousel="+o+"]").fadeIn(300).siblings().fadeOut(300)}function l(){if(v.length==0)return;v.show(),$("#bannerClose").click(function(){e.set("bannerSrc",m,new Date("May 1, 2024")),v.slideUp()})}r();var o=1,u=setInterval(f,5e3),a;$(".control li").hover(function(){clearInterval(u),clearTimeout(a);var e=$(this).attr("data-control"),t=$(this);o=e,a=setTimeout(function(){t.addClass("control-active").siblings().removeClass("control-active"),$("[data-cctitle="+e+"]").addClass("visible-title").siblings().removeClass("visible-title"),$("[data-carousel="+e+"]").fadeIn(200).siblings().fadeOut(200)},50)},function(){clearInterval(u)}),$(".carousel-container").hover(function(){clearInterval(u)},function(){u=setInterval(f,5e3)}),$(window).width()>700&&($(".tags").each(function(e,t){$(t).css("marginTop",-55-$(t).height()/2)}),$(".tips").each(function(e,t){$(t).css({marginTop:-55-$(t).height()/2,marginLeft:125-$(t).width()/2})}),$(".shade").hover(function(){var e=$(this).parent();e.find(".course-time,.course-ch").stop().fadeOut(200),e.find(".tips").stop().animate({marginTop:-70-e.find(".tips").height()/2,opacity:"1"},200).show(),e.find(".tags").stop().animate({marginTop:-70-e.find(".tags").height()/2,opacity:"1"},200).show()},function(){var e=$(this).parent();e.find(".course-time,.course-ch").stop().fadeIn(200),e.find(".tips").stop().animate({marginTop:"+=15",opacity:"0"},200).hide(),e.find(".tags").stop().animate({marginTop:"+=15",opacity:"0"},200).hide()})),$(window).width()<700?($(".mobile-ul").show().siblings().hide(),$(".slider").bxSlider({minSlides:1,maxSlides:4,slideWidth:230,slideMargin:25,hideControlOnEnd:!0,adaptiveHeight:!0,infiniteLoop:!1}),$(".special_list.slider").bxSlider({minSlides:1,maxSlides:4,slideWidth:230,slideMargin:25,adaptiveHeight:!0,infiniteLoop:!1})):$(".mobile-ul").hide().siblings().show();var c=$(window);c.bind("showOverlay",function(e,n){var r=new t("","","",n.type);r.title("").width(n.width).height(n.height).open(n.url).showCover(.8,"#f9f9f9"),$("#blockCover").click(function(){r.close()})});if(document.body.clientWidth>768){var h=e.get("hasVisited"),p=e.get("bannerSrc"),d=e.get("hasSignedUp"),v=$("#banner"),m=v.find("img").attr("src");h===""?(c.trigger("showOverlay",{type:"guide",width:800,height:520,url:guideUrl}),e.set("hasVisited","true",new Date("May 1, 2024")),l()):(d===""&&ukey&&(c.trigger("showOverlay",{type:"helper",width:760,height:330,url:welcomeUrl}),e.set("hasSignedUp","true",new Date("May 1, 2024"))),p!==m&&l())}}),define("index",function(){})})();